(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/push/push_zudui"],{"2eab":function(e,t,n){"use strict";(function(e,t){var a=n("4ea4");n("f290");a(n("66fd"));var s=a(n("f1e1"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(s.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},"543f":function(e,t,n){"use strict";(function(e){var a=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(n("2eee")),i=a(n("c973")),o={data:function(){return{phoneWidth:0,imageValue:[],videoValue:[],tempImageValue:[],tempVideoValue:[],type:"",theHandAddLabel:"",theSelectedranges:[],theAddress:{title:"",status:0,code:""},settlement_1s:["元/小时","元/天","元/月"],theSettlement_1sIndex:0,settlement_2s:["日结","周结","月结"],theSettlement_2sIndex:0,theData:{id:0,type:"",title:"",content:"",url:"",is_on:"",area_codes:"",label:"",is_anonymous:2,hope_num:0,free_type:"免费",sex_type:"不限",area_code:"",start_at:"",end_at:"",wages:"",settlement:"元/小时/日结",task_id:0},theSelectedLabels:[],theLabels:["#我1啊","#我是2啊","#我才是3啊","#我4啊","#我5啊","#我是不是6啊"],sexs:["不限","男生","女生"],theSexIndex:0,settlements:["免费","AA"],theSettlementIndex:0,dateRange:[]}},onLoad:function(t){var n=this;e.getSystemInfo({success:function(e){n.phoneWidth=e.windowWidth}}),this.type=t.type},onShow:function(){this.theData.area_code=this.$store.state.store_addressPush.code,this.theAddress=this.$store.state.store_addressPush,this.theSelectedranges=this.$store.state.theSelectedranges},methods:{toPush:function(t){var n=this,a=[];return new Promise((function(o,u){if(n.pushChecking()){for(var l=0;l<n.tempImageValue.length;l++)a.push(n.tempImageValue[l].url);n.theData.url=a.join(","),n.theData.label=n.theSelectedLabels.join(","),"兼职"==n.type&&(n.theData.settlement=n.settlement_1s[n.theSettlement_1sIndex]+"/"+n.settlement_2s[n.theSettlement_2sIndex]),e.request({url:n.$store.state.theUrl+"/wechat/moments/publish",method:"POST",header:{token:n.$store.state.theToken},data:n.theData,success:function(a){console.log("toPush_res",a),0==a.data.code?("存草稿"==t?(e.showToast({title:"保存成功！",duration:500,icon:"none"}),n.$store.commit("changeOnload",!0),setTimeout((function(){e.switchTab({url:"/pages/index/index"})}),600)):n.$store.dispatch("upDownMyMoments",{id:a.data.data.id,is_on:1}),o()):500==a.data.code?e.showToast({title:"服务器连接失败，请反馈官方客服哦~",duration:2500,icon:"none"}):410==a.data.code?(0,i.default)(s.default.mark((function e(){return s.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.$store.dispatch("toLogon",{});case 2:n.toPush();case 3:case"end":return e.stop()}}),e)})))():e.showToast({title:a.data.msg,duration:2500,icon:"none"})},fail:function(t){e.showToast({title:"网络失败，请重试！多次无效后，反馈官方客服哦！",duration:2500,icon:"none"})}})}}))},pushChecking:function(){return"组队/搭子"!=this.type&&"兼职"!=this.type?""==this.theData.title?(e.showToast({title:"赶快填写一个标题吧~",duration:2500,icon:"none"}),!1):(this.theData.type=this.type,!0):"组队/搭子"==this.type?""==this.theData.title?(e.showToast({title:"赶快填写一个标题吧~",duration:2500,icon:"none"}),!1):this.theData.hope_num<2?(e.showToast({title:"请至少填写2个及以上的组队期望人数哦~",duration:2500,icon:"none"}),!1):""==this.theData.start_at||""==this.theData.end_at?(e.showToast({title:"请填写活动日期哦~",duration:2500,icon:"none"}),!1):""==this.theData.area_code?(e.showToast({title:"请选择活动所在城市~",duration:2500,icon:"none"}),!1):(this.theData.type=this.type,!0):"兼职"==this.type?""==this.theData.title?(e.showToast({title:"赶快填写一个标题吧~",duration:2500,icon:"none"}),!1):""==this.theData.area_code?(e.showToast({title:"请选择兼职所在城市~",duration:2500,icon:"none"}),!1):""==this.theData.wages?(e.showToast({title:"如不确定金额，可直接填写“面议”。",duration:2500,icon:"none"}),!1):(this.theData.type=this.type,!0):void 0},getLabels:function(){var t=this;return new Promise((function(n,a){e.request({url:t.$store.state.theUrl+"/wechat/moments/getLabels",method:"POST",header:{token:t.$store.state.theToken},data:{type:t.type},success:function(a){if(console.log("getLabels_res",a),0==a.data.code){t.theLabels=[];for(var o=0;o<a.data.data.length;o++)t.theLabels.push(a.data.data[o].title);n()}else if(500==a.data.code)e.showToast({title:"服务器连接失败，请反馈官方客服哦~",duration:2500,icon:"none"});else if(410==a.data.code){var u=t;(0,i.default)(s.default.mark((function e(){return s.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.$store.dispatch("toLogon",{});case 2:u.openPopup_huati();case 3:case"end":return e.stop()}}),e)})))()}else e.showToast({title:a.data.msg,duration:2500,icon:"none"})},fail:function(t){e.showToast({title:"网络失败，请重试！多次无效后，反馈官方客服哦！",duration:2500,icon:"none"}),n()}})}))},imageSelect:function(e){var t=this.$public.getNowDateTime(),n=this;(0,i.default)(s.default.mark((function a(){var i,o,u,l;return s.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:for(i=[],o=0;o<e.tempFiles.length;o++)i.push(t+"_"+o);return a.next=4,n.$store.dispatch("upLoadImage",{type:"img",tempFilePaths:e.tempFilePaths,name:i,tempFiles:e.tempFiles});case 4:if(u=n.$store.state.tempImageUrl,0!=u.length){for(l=0;l<u.length;l++)n.tempImageValue.push(u[l]);n.$store.commit("changeTempImageUrl",{})}case 6:case"end":return a.stop()}}),a)})))()},imageDelete:function(e){for(var t=0;t<this.tempImageValue.length;t++)this.tempImageValue[t].uuid==e.tempFile.uuid&&this.tempImageValue.splice(t,1)},toAnonymous:function(){1==this.theData.is_anonymous?(this.theData.is_anonymous=2,e.showToast({title:"已取消匿名",duration:1500,icon:"none"})):(this.theData.is_anonymous=1,e.showToast({title:"已匿名",duration:1500,icon:"none"}))},openPopup_huati:function(){var e=this;(0,i.default)(s.default.mark((function t(){return s.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getLabels();case 2:e.$refs.huati_popup.open();case 3:case"end":return t.stop()}}),t)})))()},closePopup_huati:function(){this.$refs.huati_popup.close()},handAddLabel:function(){""!=this.theHandAddLabel&&(this.addLabel(this.theHandAddLabel),this.theHandAddLabel="")},addLabel:function(t){for(var n=!0,a=0;a<this.theSelectedLabels.length;a++)t==this.theSelectedLabels[a]&&(e.showToast({title:"已添加过这个话题了哦~",duration:1500,icon:"none"}),n=!1);1==n&&this.theSelectedLabels.push(t)},deletedOne:function(e){this.theSelectedLabels.splice(e,1)},easyinputFocus:function(e){"number"==e&&0==this.theData.hope_num&&(this.theData.hope_num=null)},easyinputBlur:function(e){"number"==e&&null==this.theData.hope_num&&(this.theData.hope_num=0)},selectedSexOne:function(e){this.theSexIndex=e,this.theData.sex_type=this.sexs[e]},selectedSettlementOne:function(e){this.theSettlementIndex=e,this.theData.free_type=this.settlements[e]},dateMaskClick:function(){this.theData.start_at=this.dateRange[0],this.theData.end_at=this.dateRange[1]},selectedSettlement_1sOne:function(e){this.theSettlement_1sIndex=e},selectedSettlement_2sOne:function(e){this.theSettlement_2sIndex=e},toRange:function(){e.navigateTo({url:"/pages/push/range"})},toAddress:function(){e.navigateTo({url:"/pages/index/address?type=push"})}}};t.default=o}).call(this,n("543d")["default"])},7676:function(e,t,n){"use strict";var a=n("bf20"),s=n.n(a);s.a},b4f6:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a}));var a={uniPopup:function(){return n.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(n.bind(null,"5c94"))},uniEasyinput:function(){return n.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(n.bind(null,"8708"))},uniFilePicker:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-file-picker/components/uni-file-picker/uni-file-picker")]).then(n.bind(null,"0cd9"))},uniIcons:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(n.bind(null,"beec"))},uniDatetimePicker:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker")]).then(n.bind(null,"f0fc"))}},s=function(){var e=this,t=e.$createElement,n=(e._self._c,e.theSelectedLabels.length),a=e.theSelectedLabels.length,s=e.theSelectedranges.length,i=e.theSelectedranges.length,o=0!=i?e.theSelectedranges.length:null,u="组队/搭子"==e.type&&""!=e.theAddress.title?e.theAddress.title.length:null,l="组队/搭子"!=e.type||""==e.theAddress.title||u<9?null:e.theAddress.title.substring(0,9),h="兼职"==e.type&&""!=e.theAddress.title?e.theAddress.title.length:null,d="兼职"!=e.type||""==e.theAddress.title||h<9?null:e.theAddress.title.substring(0,9);e._isMounted||(e.e0=function(t){return e.$public.disabled_tip("上传视频")}),e.$mp.data=Object.assign({},{$root:{g0:n,g1:a,g2:s,g3:i,g4:o,g5:u,g6:l,g7:h,g8:d}})},i=[]},bf20:function(e,t,n){},ddb1:function(e,t,n){"use strict";n.r(t);var a=n("543f"),s=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(i);t["default"]=s.a},f1e1:function(e,t,n){"use strict";n.r(t);var a=n("b4f6"),s=n("ddb1");for(var i in s)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return s[e]}))}(i);n("7676");var o=n("f0c5"),u=Object(o["a"])(s["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);t["default"]=u.exports}},[["2eab","common/runtime","common/vendor"]]]);