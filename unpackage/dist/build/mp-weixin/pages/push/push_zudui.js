(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/push/push_zudui"],{5450:function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return a}));var a={uniPopup:function(){return n.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(n.bind(null,"8f1a"))},uniIcons:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(n.bind(null,"d873"))},uniEasyinput:function(){return n.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(n.bind(null,"1f80"))},uniFilePicker:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-file-picker/components/uni-file-picker/uni-file-picker")]).then(n.bind(null,"b5fa"))},uniDatetimePicker:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker")]).then(n.bind(null,"631f"))}},s=function(){var t=this,e=t.$createElement,n=(t._self._c,t.theSelectedLabels.length),a=t.theSelectedLabels.length,s=t.theSelectedranges.length,i=t.theSelectedranges.length,o=0!=i?t.theSelectedranges.length:null,u="组队/搭子"==t.type&&""!=t.theAddress.title?t.theAddress.title.length:null,l="组队/搭子"!=t.type||""==t.theAddress.title||u<9?null:t.theAddress.title.substring(0,9),h="兼职"==t.type&&""!=t.theAddress.title?t.theAddress.title.length:null,r="兼职"!=t.type||""==t.theAddress.title||h<9?null:t.theAddress.title.substring(0,9);t._isMounted||(t.e0=function(e){return t.$public.disabled_tip("上传视频")}),t.$mp.data=Object.assign({},{$root:{g0:n,g1:a,g2:s,g3:i,g4:o,g5:u,g6:l,g7:h,g8:r}})},i=[]},8146:function(t,e,n){},a114:function(t,e,n){"use strict";(function(t,e){var a=n("4ea4");n("12b4");a(n("66fd"));var s=a(n("e07f"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(s.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},a500:function(t,e,n){"use strict";n.r(e);var a=n("d148"),s=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=s.a},d148:function(t,e,n){"use strict";(function(t){var a=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a(n("2eee")),i=a(n("c973")),o={data:function(){return{phoneWidth:0,imageValue:[],videoValue:[],tempImageValue:[],tempVideoValue:[],type:"",theHandAddLabel:"",theSelectedranges:[],theAddress:{title:"",status:0,code:""},settlement_1s:["元/小时","元/天","元/月"],theSettlement_1sIndex:0,settlement_2s:["日结","周结","月结"],theSettlement_2sIndex:0,theData:{id:0,type:"",title:"",content:"",url:"",is_on:"",area_codes:"",label:"",is_anonymous:2,hope_num:0,free_type:"免费",sex_type:"不限",area_code:"",start_at:"",end_at:"",wages:"",settlement:"元/小时/日结",task_id:0},theSelectedLabels:[],theLabels:["#我1啊","#我是2啊","#我才是3啊","#我4啊","#我5啊","#我是不是6啊"],sexs:["不限","男生","女生"],theSexIndex:0,settlements:["免费","AA"],theSettlementIndex:0,dateRange:[]}},onLoad:function(e){var n=this;t.getSystemInfo({success:function(t){n.phoneWidth=t.windowWidth}}),this.type=e.type},onShow:function(){this.theData.area_code=this.$store.state.store_addressPush.code,this.theAddress=this.$store.state.store_addressPush,this.theSelectedranges=this.$store.state.theSelectedranges},methods:{toPush:function(e){var n=this,a=[];return new Promise((function(o,u){if(n.pushChecking()){for(var l=0;l<n.tempImageValue.length;l++)a.push(n.tempImageValue[l].url);n.theData.url=a.join(","),n.theData.label=n.theSelectedLabels.join(","),"兼职"==n.type&&(n.theData.settlement=n.settlement_1s[n.theSettlement_1sIndex]+"/"+n.settlement_2s[n.theSettlement_2sIndex]),t.request({url:n.$store.state.theUrl+"/wechat/moments/publish",method:"POST",header:{token:n.$store.state.theToken},data:n.theData,success:function(a){console.log("toPush_res",a),0==a.data.code?("存草稿"==e?(t.showToast({title:"保存成功！",duration:500,icon:"none"}),setTimeout((function(){t.navigateBack()}),600)):n.$store.dispatch("upDownMyMoments",{id:a.data.data.id,is_on:1}),o()):500==a.data.code?t.showToast({title:"服务器连接失败，请反馈官方客服哦~",duration:2500,icon:"none"}):410==a.data.code?t.showModal({title:"温馨提示：",content:"当前登录身份已过期，点击“重新登录”继续吧~",confirmText:"重新登录",confirmColor:"#f89f12",showCancel:!1,success:function(t){if(t.confirm){var e=n;(0,i.default)(s.default.mark((function t(){return s.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("toLogon",{});case 2:e.toPush();case 3:case"end":return t.stop()}}),t)})))()}}}):t.showToast({title:a.data.msg,duration:2500,icon:"none"})},fail:function(e){t.showToast({title:"网络失败，请重试！多次无效后，反馈官方客服哦！",duration:2500,icon:"none"})}})}}))},pushChecking:function(){return"组队/搭子"!=this.type&&"兼职"!=this.type?""==this.theData.title?(t.showToast({title:"赶快填写一个标题吧~",duration:2500,icon:"none"}),!1):this.theData.content.length<6?(t.showToast({title:"请至少填写6个字的内容哦~",duration:2500,icon:"none"}),!1):(this.theData.type=this.type,!0):"组队/搭子"==this.type?""==this.theData.title?(t.showToast({title:"赶快填写一个标题吧~",duration:2500,icon:"none"}),!1):this.theData.content.length<6?(t.showToast({title:"请至少填写6个字的内容哦~",duration:2500,icon:"none"}),!1):this.theData.hope_num<2?(t.showToast({title:"请至少填写2个及以上的组队期望人数哦~",duration:2500,icon:"none"}),!1):""==this.theData.start_at||""==this.theData.end_at?(t.showToast({title:"请填写活动日期哦~",duration:2500,icon:"none"}),!1):""==this.theData.area_code?(t.showToast({title:"请选择活动所在城市~",duration:2500,icon:"none"}),!1):(this.theData.type=this.type,!0):"兼职"==this.type?""==this.theData.title?(t.showToast({title:"赶快填写一个标题吧~",duration:2500,icon:"none"}),!1):this.theData.content.length<6?(t.showToast({title:"请至少填写6个字的内容哦~",duration:2500,icon:"none"}),!1):""==this.theData.area_code?(t.showToast({title:"请选择兼职所在城市~",duration:2500,icon:"none"}),!1):""==this.theData.wages?(t.showToast({title:"如不确定金额，可直接填写“面议”。",duration:2500,icon:"none"}),!1):(this.theData.type=this.type,!0):void 0},getLabels:function(){var e=this;return new Promise((function(n,a){t.request({url:e.$store.state.theUrl+"/wechat/moments/getLabels",method:"POST",header:{token:e.$store.state.theToken},data:{type:e.type},success:function(a){if(console.log("getLabels_res",a),0==a.data.code){e.theLabels=[];for(var o=0;o<a.data.data.length;o++)e.theLabels.push(a.data.data[o].title);n()}else 500==a.data.code?t.showToast({title:"服务器连接失败，请反馈官方客服哦~",duration:2500,icon:"none"}):410==a.data.code?t.showModal({title:"温馨提示：",content:"当前登录身份已过期，点击“重新登录”继续吧~",confirmText:"重新登录",confirmColor:"#f89f12",showCancel:!1,success:function(t){if(t.confirm){var n=e;(0,i.default)(s.default.mark((function t(){return s.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n.$store.dispatch("toLogon",{});case 2:n.openPopup_huati();case 3:case"end":return t.stop()}}),t)})))()}}}):t.showToast({title:a.data.msg,duration:2500,icon:"none"})},fail:function(e){t.showToast({title:"网络失败，请重试！多次无效后，反馈官方客服哦！",duration:2500,icon:"none"}),n()}})}))},imageSelect:function(t){var e=this.$public.getNowDateTime(),n=this;(0,i.default)(s.default.mark((function a(){return s.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,n.$store.dispatch("upLoadImage",{type:"img",tempFilePaths:t.tempFilePaths,name:e,extname:t.tempFiles[0].extname,uuid:t.tempFiles[0].uuid});case 2:""!=n.$store.state.tempImageUrl.url&&(n.tempImageValue.push({url:n.$store.state.tempImageUrl.url,uuid:n.$store.state.tempImageUrl.uuid}),n.$store.commit("changeTempImageUrl",{url:"",uuid:0}));case 3:case"end":return a.stop()}}),a)})))()},imageDelete:function(t){for(var e=0;e<this.tempImageValue.length;e++)this.tempImageValue[e].uuid==t.tempFile.uuid&&this.tempImageValue.splice(e,1)},toAnonymous:function(){1==this.theData.is_anonymous?(this.theData.is_anonymous=2,t.showToast({title:"已取消匿名",duration:1500,icon:"none"})):(this.theData.is_anonymous=1,t.showToast({title:"已匿名",duration:1500,icon:"none"}))},openPopup_huati:function(){var t=this;(0,i.default)(s.default.mark((function e(){return s.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getLabels();case 2:t.$refs.huati_popup.open();case 3:case"end":return e.stop()}}),e)})))()},closePopup_huati:function(){this.$refs.huati_popup.close()},handAddLabel:function(){""!=this.theHandAddLabel&&(this.addLabel("#"+this.theHandAddLabel),this.theHandAddLabel="")},addLabel:function(e){for(var n=!0,a=0;a<this.theSelectedLabels.length;a++)e==this.theSelectedLabels[a]&&(t.showToast({title:"已添加过这个话题了哦~",duration:1500,icon:"none"}),n=!1);1==n&&this.theSelectedLabels.push(e)},deletedOne:function(t){this.theSelectedLabels.splice(t,1)},easyinputFocus:function(t){"number"==t&&0==this.theData.hope_num&&(this.theData.hope_num=null)},easyinputBlur:function(t){"number"==t&&null==this.theData.hope_num&&(this.theData.hope_num=0)},selectedSexOne:function(t){this.theSexIndex=t,this.theData.sex_type=this.sexs[t]},selectedSettlementOne:function(t){this.theSettlementIndex=t,this.theData.free_type=this.settlements[t]},dateMaskClick:function(){console.log("this.dateRange",this.dateRange),this.theData.start_at=this.dateRange[0],this.theData.end_at=this.dateRange[1],console.log("开始结束",this.theData.start_at,this.theData.end_at)},selectedSettlement_1sOne:function(t){this.theSettlement_1sIndex=t},selectedSettlement_2sOne:function(t){this.theSettlement_2sIndex=t},toRange:function(){t.navigateTo({url:"/pages/push/range"})},toAddress:function(){t.navigateTo({url:"/pages/index/address?type=push"})}}};e.default=o}).call(this,n("543d")["default"])},e07f:function(t,e,n){"use strict";n.r(e);var a=n("5450"),s=n("a500");for(var i in s)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return s[t]}))}(i);n("efb9");var o=n("f0c5"),u=Object(o["a"])(s["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);e["default"]=u.exports},efb9:function(t,e,n){"use strict";var a=n("8146"),s=n.n(a);s.a}},[["a114","common/runtime","common/vendor"]]]);