(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mine/mine"],{"0d1e":function(t,e,n){"use strict";n.r(e);var o=n("8cf3"),a=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=a.a},"5c00":function(t,e,n){},"8cf3":function(t,e,n){"use strict";(function(t){var o=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(n("2eee")),i=o(n("9523")),s=o(n("c973"));function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){(0,i.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var c={data:function(){return{statusBarHeight:0,navBarHeight:0,erweima_img:"",theLogonUser:{avatar_url:""},totalCount:11,line_2_items:[{num:0,name:"关注"},{num:0,name:"粉丝"},{num:0,name:"鸥元"},{num:0,name:"积分"},{num:0,name:"赞过"}],line_3_items:[{src:"/static/5_line_3_1@3x.png",name:"订单管理",enable:!0},{src:"/static/5_line_3_2@3x.png",name:"发布管理",enable:!0},{src:"/static/5_line_3_3@3x.png",name:"工作室",enable:!0},{src:"/static/5_line_3_4@3x.png",name:"更多功能",enable:!0}],line_4_items:["收藏","组队","点赞"],line_4_items_index:0,theGetMomentsListPage:1,theGetMomentsListPagesize:4,school_datas:[],inviteId:{}}},onLoad:function(){var t=this.$public.getTopIconDistance();this.statusBarHeight=t.statusBarHeight,this.navBarHeight=t.navBarHeight},onShow:function(){this.theLogonUser=this.$store.state.theLogonUser,console.log("this.theLogonUser",this.theLogonUser);var t=this;(0,s.default)(a.default.mark((function e(){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getMyStatisticsNum();case 2:t.theGetMomentsListPage=1,t.school_datas=[],t.totalCount=10,t.line_4_itemsSelected(t.line_4_items_index,"其他");case 6:case"end":return e.stop()}}),e)})))(),this.$store.commit("changePreviousPage",{previousPage:4,isPage_2:!1})},onPullDownRefresh:function(){var e=this;(0,s.default)(a.default.mark((function n(){return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.getMyStatisticsNum();case 2:e.line_4_itemsSelected(0,"状态切换"),t.stopPullDownRefresh();case 4:case"end":return n.stop()}}),n)})))()},onReachBottom:function(){this.line_4_itemsSelected(this.line_4_items_index,"其他")},onShareAppMessage:function(t){if(console.log(t,this.inviteId),"button"==t.from)return{title:this.inviteId.title,path:"/pages/index/detail?id=".concat(this.inviteId.id),imageUrl:this.inviteId.url?this.inviteId.url.split(",")[0]:"/static/icon-zd.png"}},methods:{zuduiButtons:function(){var e=(0,s.default)(a.default.mark((function e(n){var o,i;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(1!=n.type){e.next=7;break}return o=n.is_entry,e.next=4,this.$store.dispatch("toEntry",{id:n.id,is_entry:n.is_entry});case 4:if(1==this.$store.state.is_entry_true)for(i=0;i<this.school_datas.length;i++)n.id==this.school_datas[i].id&&(2==o?(this.$set(this.school_datas[i],"entry_num",this.school_datas[i].entry_num+1),this.$set(this.school_datas[i],"is_entry",1),t.showToast({title:"加入成功",duration:1e3,icon:"none"})):(this.school_datas.splice(i,1),t.showToast({title:"已退出组队",duration:1e3,icon:"none"})));e.next=8;break;case 7:this.inviteId=n;case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),goDetail:function(e){t.navigateTo({url:"/page_product/pages/product/detail?id="+e.id})},toMoudle:function(e){1==e&&t.navigateTo({url:"/page_product/pages/fans/index"})},animtionAction:function(){var t=this,e=setInterval((function(){t.$refs.theMessage.animtionAction()}),1e3);t.$store.commit("changeRedTip",{isRedTip:!0}),setTimeout((function(){clearInterval(e)}),5e3)},getschool_datas:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.isLoading="loading";var n={page:this.theGetMomentsListPage,pagesize:this.theGetMomentsListPagesize,is_collection:1};this.API.home.getTaskList(n).then((function(n){if(console.log(n),1==t.theGetMomentsListPage&&(t.school_datas=[]),t.totalCount=n.count,0!=n.data.length){for(var o=0;o<n.data.length;o++)t.school_datas.push(u(u({},n.data[o]),{},{img_url:n.data[o].img_url?n.data[o].img_url.split(",")[0]:""}));t.isLoading="no-more",t.theGetMomentsListPage+=1}else t.isLoading="no-more";e&&t.toScroll(e),console.log(t.school_datas)})).catch(function(){var n=(0,s.default)(a.default.mark((function n(o){return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(410!=o.code){n.next=4;break}return n.next=3,t.$store.dispatch("toLogon",{});case 3:t.getschool_datas(e);case 4:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())},toScroll:function(e){console.log(e),"状态切换"==e&&setTimeout((function(){t.pageScrollTo({selector:".content",scrollTop:200})}),100)},line_4_itemsSelected:function(){var t=(0,s.default)(a.default.mark((function t(e,n){var o;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("状态切换"!=n||this.line_4_items_index!=e){t.next=2;break}return t.abrupt("return",!1);case 2:if("状态切换"==n&&(this.theGetMomentsListPage=1,this.school_datas=[],this.totalCount=10),this.line_4_items_index=e,0!=e){t.next=8;break}this.school_datas.length<this.totalCount&&this.getschool_datas(n),t.next=13;break;case 8:return o={page:this.theGetMomentsListPage,pagesize:this.theGetMomentsListPagesize,type:""},1==e?o.is_entry=1:o.is_thumb=1,t.next=12,this.getMomentsList(o);case 12:this.toScroll(n);case 13:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),openPopup_erweima:function(){var t=(0,s.default)(a.default.mark((function t(){return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getShareQrCode();case 2:this.$refs.erweima_popup.open();case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),closePopup_erweima:function(){this.$refs.erweima_popup.close()},topPerSonalhome:function(e){t.navigateTo({url:"/pages/follow/personalhome?id="+e})},toDetail:function(e){t.navigateTo({url:"/pages/index/detail?id="+e})},toPersonal:function(e){if(0!=e)t.navigateTo({url:"/page_product/pages/info/personal?level="+e});else{var n=this;t.showModal({title:"温馨提示：",content:"需要认证用户才能修改个人信息哦，点击“去认证”继续吧~",confirmText:"去认证",confirmColor:"#f89f12",showCancel:!0,success:function(t){t.confirm?n.toRegister(0):t.cancel}})}},toRegister:function(e){t.navigateTo({url:"/page_product/pages/info/register?level="+e})},toMinePush:function(e){1==e?t.navigateTo({url:"/pages/mine/mine_push"}):2==e?0!=this.$store.state.theLogonUser.level?0==this.$store.state.theLogonUser.shop_id?t.navigateTo({url:"/page_product/pages/mall/addMall"}):1==this.$store.state.theLogonUser.shop_status?t.navigateTo({url:"/page_product/pages/mall/index?id="+this.$store.state.theLogonUser.shop_id+"&userId="+this.$store.state.theLogonUser.id}):2==this.$store.state.theLogonUser.shop_status?t.navigateTo({url:"/page_product/pages/mall/addMall?id="+this.$store.state.theLogonUser.shop_id}):t.showToast({title:"工作室待审核",icon:"none"}):this.$public.disabled_tip("工作室"):3==e?this.$public.disabled_tip("更多"):t.navigateTo({url:"/page_product/pages/order/index"})},getShareQrCode:function(){var e=this;return new Promise((function(n,o){var i=e;t.request({url:i.$store.state.theUrl+"/wechat/sundry/getShareQrCode",method:"POST",header:{token:i.$store.state.theToken},success:function(e){var o=i;if(0==e.data.code)o.erweima_img=e.data.data.img,n();else if(500==e.data.code)t.showToast({title:"服务器连接失败，请反馈官方客服哦~",duration:2500,icon:"none"});else if(410==e.data.code){var r=o;(0,s.default)(a.default.mark((function t(){return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r.$store.dispatch("toLogon",{});case 2:r.theLogonUser=r.$store.state.theLogonUser,r.getShareQrCode();case 4:case"end":return t.stop()}}),t)})))()}else 411==e.data.code||t.showToast({title:e.data.msg,duration:2500,icon:"none"})},fail:function(e){t.showToast({title:"网络失败，请重试！多次无效后，反馈官方客服哦！",duration:2500,icon:"none"})}})}))},getMyStatisticsNum:function(){var e=this;return new Promise((function(n,o){var i=e;t.request({url:i.$store.state.theUrl+"/wechat/sundry/getMyStatisticsNum",method:"POST",header:{token:i.$store.state.theToken},success:function(e){var o=i;if(0==e.data.code)o.line_2_items[0].num=e.data.data.regard_num,o.line_2_items[1].num=e.data.data.fans_num,o.line_2_items[2].num=e.data.data.money_num,o.line_2_items[3].num=e.data.data.score_num,o.line_2_items[4].num=e.data.data.thumb_num,n();else if(500==e.data.code)t.showToast({title:"服务器连接失败，请反馈官方客服哦~",duration:2500,icon:"none"});else if(410==e.data.code){var r=o;(0,s.default)(a.default.mark((function t(){return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r.$store.dispatch("toLogon",{});case 2:r.theLogonUser=r.$store.state.theLogonUser,r.getMyStatisticsNum(),n();case 5:case"end":return t.stop()}}),t)})))()}else t.showToast({title:e.data.msg,duration:2500,icon:"none"})},fail:function(e){t.showToast({title:"网络失败，请重试！多次无效后，反馈官方客服哦！",duration:2500,icon:"none"})}})}))},getMomentsList:function(e){var n=this;return new Promise((function(o,a){var i=n;i.isLoading="loading",i.school_datas.length<i.totalCount&&t.request({url:i.$store.state.theUrl+"/wechat/moments/getMomentsList",method:"POST",header:{token:i.$store.state.theToken},data:e,success:function(e){var n=i;if(1==n.theGetMomentsListPage&&(n.school_datas=[],n.totalCount=e.data.count),0==e.data.code)if(0!=e.data.data.length){for(var a=0;a<e.data.data.length;a++)n.school_datas.push(e.data.data[a]);n.isLoading="no-more",n.theGetMomentsListPage+=1,o()}else n.isLoading="no-more",o();else 500==e.data.code?t.showToast({title:"服务器连接失败，请反馈官方客服哦~",duration:2500,icon:"none"}):t.showToast({title:e.data.msg,duration:2500,icon:"none"})},fail:function(e){t.showToast({title:"网络失败，请重试！多次无效后，反馈官方客服哦！",duration:2500,icon:"none"})}})}))}}};e.default=c}).call(this,n("543d")["default"])},"9aef":function(t,e,n){"use strict";var o=n("5c00"),a=n.n(o);a.a},e8a1:function(t,e,n){"use strict";n.r(e);var o=n("f041"),a=n("0d1e");for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n("9aef");var s=n("f0c5"),r=Object(s["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);e["default"]=r.exports},f041:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}));var o={uniPopup:function(){return n.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(n.bind(null,"5c94"))},uniIcons:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(n.bind(null,"beec"))},postTypeZudui:function(){return n.e("uni_modules/post-type-zudui/components/post-type-zudui/post-type-zudui").then(n.bind(null,"8625"))},uniLoadMore:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-load-more/components/uni-load-more/uni-load-more")]).then(n.bind(null,"db88"))},tabBar:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/tab-Bar/components/tab-Bar/tab-Bar")]).then(n.bind(null,"0d46"))}},a=function(){var t=this.$createElement,e=(this._self._c,""!=this.theLogonUser.phone&&null!=this.theLogonUser.phone?this.theLogonUser.phone.substring(0,3):null),n=""!=this.theLogonUser.phone&&null!=this.theLogonUser.phone?this.theLogonUser.phone.substring(7,11):null;this.$mp.data=Object.assign({},{$root:{g0:e,g1:n}})},i=[]},fafa:function(t,e,n){"use strict";(function(t,e){var o=n("4ea4");n("f290");o(n("66fd"));var a=o(n("e8a1"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(a.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])}},[["fafa","common/runtime","common/vendor"]]]);