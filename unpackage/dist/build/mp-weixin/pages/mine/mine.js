(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mine/mine"],{"0d1e":function(e,t,n){"use strict";n.r(t);var o=n("8cf3"),a=n.n(o);for(var s in o)["default"].indexOf(s)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(s);t["default"]=a.a},"5c00":function(e,t,n){},"8cf3":function(e,t,n){"use strict";(function(e){var o=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("2eee")),s=o(n("9523")),i=o(n("c973"));function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={data:function(){return{statusBarHeight:0,navBarHeight:0,erweima_img:"",theLogonUser:{avatar_url:""},totalCount:11,line_2_items:[{num:0,name:"关注"},{num:0,name:"粉丝"},{num:0,name:"鸥元"},{num:0,name:"积分"},{num:0,name:"赞过"}],line_3_items:[{src:"/static/5_line_3_1@3x.png",name:"订单管理",enable:!0},{src:"/static/5_line_3_2@3x.png",name:"发布管理",enable:!0},{src:"/static/5_line_3_3@3x.png",name:"工作室",enable:!0},{src:"/static/5_line_3_4@3x.png",name:"更多功能",enable:!0}],line_4_items:["收藏","点赞"],line_4_items_index:0,theGetMomentsListPage:1,theGetMomentsListPagesize:4,school_datas:[]}},onLoad:function(){var e=this.$public.getTopIconDistance();this.statusBarHeight=e.statusBarHeight,this.navBarHeight=e.navBarHeight},onShow:function(){this.theLogonUser=this.$store.state.theLogonUser,console.log("this.theLogonUser",this.theLogonUser);var e=this;(0,i.default)(a.default.mark((function t(){return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getMyStatisticsNum();case 2:e.theGetMomentsListPage=1,e.school_datas=[],e.totalCount=10,e.line_4_itemsSelected(e.line_4_items_index,"其他");case 6:case"end":return t.stop()}}),t)})))(),this.$store.commit("changePreviousPage",{previousPage:4,isPage_2:!1})},onPullDownRefresh:function(){var t=this;(0,i.default)(a.default.mark((function n(){return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.getMyStatisticsNum();case 2:t.line_4_itemsSelected(0,"状态切换"),e.stopPullDownRefresh();case 4:case"end":return n.stop()}}),n)})))()},onReachBottom:function(){this.line_4_itemsSelected(this.line_4_items_index,"其他")},methods:{goDetail:function(t){e.navigateTo({url:"/page_product/pages/product/detail?id="+t.id})},toMoudle:function(t){1==t&&e.navigateTo({url:"/page_product/pages/fans/index"})},animtionAction:function(){var e=this,t=setInterval((function(){e.$refs.theMessage.animtionAction()}),1e3);e.$store.commit("changeRedTip",{isRedTip:!0}),setTimeout((function(){clearInterval(t)}),5e3)},getShopList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.isLoading="loading";var n={page:this.theGetMomentsListPage,pagesize:this.theGetMomentsListPagesize,is_collection:1};this.API.home.getTaskList(n).then((function(n){if(console.log(n),1==e.theGetMomentsListPage&&(e.school_datas=[]),e.totalCount=n.count,0!=n.data.length){for(var o=0;o<n.data.length;o++)e.school_datas.push(u(u({},n.data[o]),{},{img_url:n.data[o].img_url?n.data[o].img_url.split(",")[0]:""}));e.isLoading="no-more",e.theGetMomentsListPage+=1}else e.isLoading="no-more";t&&e.toScroll(t),console.log(e.school_datas)})).catch(function(){var n=(0,i.default)(a.default.mark((function n(o){return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(410!=o.code){n.next=4;break}return n.next=3,e.$store.dispatch("toLogon",{});case 3:e.getShopList(t);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())},toScroll:function(t){console.log(t),"状态切换"==t&&setTimeout((function(){e.pageScrollTo({selector:".content",scrollTop:200})}),100)},line_4_itemsSelected:function(){var e=(0,i.default)(a.default.mark((function e(t,n){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("状态切换"!=n||this.line_4_items_index!=t){e.next=2;break}return e.abrupt("return",!1);case 2:if("状态切换"==n&&(this.theGetMomentsListPage=1,this.school_datas=[],this.totalCount=10),this.line_4_items_index=t,0!=t){e.next=8;break}this.school_datas.length<this.totalCount&&this.getShopList(n),e.next=11;break;case 8:return e.next=10,this.getMomentsList({is_thumb:1,page:this.theGetMomentsListPage,pagesize:this.theGetMomentsListPagesize,type:""});case 10:this.toScroll(n);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),openPopup_erweima:function(){var e=(0,i.default)(a.default.mark((function e(){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getShareQrCode();case 2:this.$refs.erweima_popup.open();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),closePopup_erweima:function(){this.$refs.erweima_popup.close()},topPerSonalhome:function(t){e.navigateTo({url:"/pages/follow/personalhome?id="+t})},toDetail:function(t){e.navigateTo({url:"/pages/index/detail?id="+t})},toPersonal:function(t){if(0!=t)e.navigateTo({url:"/page_product/pages/info/personal?level="+t});else{var n=this;e.showModal({title:"温馨提示：",content:"需要认证用户才能修改个人信息哦，点击“去认证”继续吧~",confirmText:"去认证",confirmColor:"#f89f12",showCancel:!0,success:function(e){e.confirm?n.toRegister(0):e.cancel}})}},toRegister:function(t){e.navigateTo({url:"/page_product/pages/info/register?level="+t})},toMinePush:function(t){1==t?e.navigateTo({url:"/pages/mine/mine_push"}):2==t?0!=this.$store.state.theLogonUser.level?0==this.$store.state.theLogonUser.shop_id?e.navigateTo({url:"/page_product/pages/mall/addMall"}):1==this.$store.state.theLogonUser.shop_status?e.navigateTo({url:"/page_product/pages/mall/index?id="+this.$store.state.theLogonUser.shop_id+"&userId="+this.$store.state.theLogonUser.id}):2==this.$store.state.theLogonUser.shop_status?e.navigateTo({url:"/page_product/pages/mall/addMall?id="+this.$store.state.theLogonUser.shop_id}):e.showToast({title:"工作室待审核",icon:"none"}):this.$public.disabled_tip("工作室"):3==t?this.$public.disabled_tip("更多"):e.navigateTo({url:"/page_product/pages/order/index"})},getShareQrCode:function(){var t=this;return new Promise((function(n,o){var s=t;e.request({url:s.$store.state.theUrl+"/wechat/sundry/getShareQrCode",method:"POST",header:{token:s.$store.state.theToken},success:function(t){var o=s;if(0==t.data.code)o.erweima_img=t.data.data.img,n();else if(500==t.data.code)e.showToast({title:"服务器连接失败，请反馈官方客服哦~",duration:2500,icon:"none"});else if(410==t.data.code){var r=o;(0,i.default)(a.default.mark((function e(){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.$store.dispatch("toLogon",{});case 2:r.theLogonUser=r.$store.state.theLogonUser,r.getShareQrCode();case 4:case"end":return e.stop()}}),e)})))()}else 411==t.data.code||e.showToast({title:t.data.msg,duration:2500,icon:"none"})},fail:function(t){e.showToast({title:"网络失败，请重试！多次无效后，反馈官方客服哦！",duration:2500,icon:"none"})}})}))},getMyStatisticsNum:function(){var t=this;return new Promise((function(n,o){var s=t;e.request({url:s.$store.state.theUrl+"/wechat/sundry/getMyStatisticsNum",method:"POST",header:{token:s.$store.state.theToken},success:function(t){var o=s;if(0==t.data.code)o.line_2_items[0].num=t.data.data.regard_num,o.line_2_items[1].num=t.data.data.fans_num,o.line_2_items[2].num=t.data.data.money_num,o.line_2_items[3].num=t.data.data.score_num,o.line_2_items[4].num=t.data.data.thumb_num,n();else if(500==t.data.code)e.showToast({title:"服务器连接失败，请反馈官方客服哦~",duration:2500,icon:"none"});else if(410==t.data.code){var r=o;(0,i.default)(a.default.mark((function e(){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.$store.dispatch("toLogon",{});case 2:r.theLogonUser=r.$store.state.theLogonUser,r.getMyStatisticsNum(),n();case 5:case"end":return e.stop()}}),e)})))()}else e.showToast({title:t.data.msg,duration:2500,icon:"none"})},fail:function(t){e.showToast({title:"网络失败，请重试！多次无效后，反馈官方客服哦！",duration:2500,icon:"none"})}})}))},getMomentsList:function(t){var n=this;return new Promise((function(o,a){var s=n;s.isLoading="loading",s.school_datas.length<s.totalCount&&e.request({url:s.$store.state.theUrl+"/wechat/moments/getMomentsList",method:"POST",header:{token:s.$store.state.theToken},data:t,success:function(t){var n=s;if(1==n.theGetMomentsListPage&&(n.school_datas=[],n.totalCount=t.data.count),0==t.data.code)if(0!=t.data.data.length){for(var a=0;a<t.data.data.length;a++)n.school_datas.push(t.data.data[a]);n.isLoading="no-more",n.theGetMomentsListPage+=1,o()}else n.isLoading="no-more",o();else 500==t.data.code?e.showToast({title:"服务器连接失败，请反馈官方客服哦~",duration:2500,icon:"none"}):e.showToast({title:t.data.msg,duration:2500,icon:"none"})},fail:function(t){e.showToast({title:"网络失败，请重试！多次无效后，反馈官方客服哦！",duration:2500,icon:"none"})}})}))}}};t.default=c}).call(this,n("543d")["default"])},"9aef":function(e,t,n){"use strict";var o=n("5c00"),a=n.n(o);a.a},e8a1:function(e,t,n){"use strict";n.r(t);var o=n("f4e3"),a=n("0d1e");for(var s in a)["default"].indexOf(s)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(s);n("9aef");var i=n("f0c5"),r=Object(i["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=r.exports},f4e3:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return o}));var o={uniPopup:function(){return n.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(n.bind(null,"5c94"))},uniIcons:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(n.bind(null,"beec"))},postTypeZudui:function(){return n.e("uni_modules/post-type-zudui/components/post-type-zudui/post-type-zudui").then(n.bind(null,"8625"))},uniLoadMore:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-load-more/components/uni-load-more/uni-load-more")]).then(n.bind(null,"db88"))},tabBar:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/tab-Bar/components/tab-Bar/tab-Bar")]).then(n.bind(null,"0d46"))}},a=function(){var e=this.$createElement,t=(this._self._c,""!=this.theLogonUser.phone&&null!=this.theLogonUser.phone?this.theLogonUser.phone.substring(0,3):null),n=""!=this.theLogonUser.phone&&null!=this.theLogonUser.phone?this.theLogonUser.phone.substring(7,11):null;this.$mp.data=Object.assign({},{$root:{g0:t,g1:n}})},s=[]},fafa:function(e,t,n){"use strict";(function(e,t){var o=n("4ea4");n("f290");o(n("66fd"));var a=o(n("e8a1"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(a.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])}},[["fafa","common/runtime","common/vendor"]]]);