(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mine/register"],{"0b51":function(e,t,n){"use strict";n.r(t);var o=n("ffe1"),a=n("32bf");for(var s in a)["default"].indexOf(s)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(s);n("5157");var i=n("f0c5"),r=Object(i["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=r.exports},"32bf":function(e,t,n){"use strict";n.r(t);var o=n("a4f6"),a=n.n(o);for(var s in o)["default"].indexOf(s)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(s);t["default"]=a.a},5157:function(e,t,n){"use strict";var o=n("a42d"),a=n.n(o);a.a},a42d:function(e,t,n){},a4f6:function(e,t,n){"use strict";(function(e){var o=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("2eee")),s=o(n("c973")),i={data:function(){return{parameters:{name:"",phone:null,sex:"男",school_id:0,school_ids:"",grad_date:"",check_code:"",intro:"",nick_name:"",avatar_url:"",birthday:"",specialty:"",pic:""},theLevel:0,theschoolName:"",sexs:["男","女"],theSexIndex:0}},onLoad:function(e){this.theLevel=e.level},onShow:function(){if(this.parameters.school_id=this.$store.state.store_schoolNow.id,this.theschoolName=this.$store.state.store_schoolNow.title,1==this.theLevel){var e=this.$store.state.theLogonUser;this.parameters.name=""==e.name||null==e.name?"":e.name,this.parameters.phone=""==e.phone||null==e.phone?"":e.phone;var t=""==e.sex||null==e.sex?"":e.sex;""!=t&&(this.theSexIndex=this.sexs.indexOf(t)),this.parameters.school_id=e.school_id,this.theschoolName=""==e.school_name||null==e.school_name?"":e.school_name,this.parameters.grad_date=""==e.grad_date||null==e.grad_date?"":e.grad_date}},computed:{storePhone:function(){return this.$store.state.theLogonUser.phone},storeCodeSecond:function(){return this.$store.state.codeSecond}},methods:{selectedSexOne:function(t){0==this.theLevel?(this.theSexIndex=t,this.parameters.sex=this.sexs[t]):e.showToast({title:"提交后，前往个人信息中修改哦~",duration:2500,icon:"none"})},dateMaskClick:function(e){this.parameters.grad_date=e},sendCode:function(){if(1!=this.theLevel){var t=this;return new Promise((function(n,o){var i=t;i.isLoading="loading",""!=i.parameters.phone&&null!=i.parameters.phone&&11==i.parameters.phone.length?e.request({url:i.$store.state.theUrl+"/wechat/wx/sendSmsCheckCode",method:"POST",header:{token:i.$store.state.theToken},data:{phone:i.parameters.phone,type:1},success:function(t){console.log("sendCode_res",t);var o=i;if(0==t.data.code){var r=59,c=setInterval((function(){r-=1,o.$store.commit("changecodeSecond",{codeSecond:r}),0==r&&clearInterval(c)}),1e3);e.showToast({title:"验证码已发送，请及时查收！",duration:2500,icon:"none"}),n()}else if(500==t.data.code)e.showToast({title:"服务器连接失败，请反馈官方客服哦~",duration:2500,icon:"none"});else if(410==t.data.code){var u=o;(0,s.default)(a.default.mark((function e(){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.$store.dispatch("toLogon",{});case 2:u.sendCode();case 3:case"end":return e.stop()}}),e)})))()}else e.showToast({title:t.data.msg,duration:2500,icon:"none"})},fail:function(t){e.showToast({title:"网络失败，请重试！多次无效后，反馈官方客服哦！",duration:2500,icon:"none"})}}):e.showToast({title:"请填写正确的手机号码！",duration:2500,icon:"none"})}))}e.showToast({title:"审核中不能修改哦~",duration:2500,icon:"none"})},toLogonRegister:function(){var t=this;return new Promise((function(n,o){var i=t;i.inspect()&&e.request({url:i.$store.state.theUrl+"/wechat/wx/logon",method:"POST",header:{token:i.$store.state.theToken},data:i.parameters,success:function(t){console.log("toLogonRegister_res",t);var o=i;if(0==t.data.code){o.$store.commit("changeTheLogonUser_register",{level:t.data.data.user.level,theToken:t.data.data.token,avatar_url:t.data.data.user.avatar_url,nick_name:t.data.data.user.nick_name});var r=o;(0,s.default)(a.default.mark((function t(){return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r.$store.dispatch("toLogon",{});case 2:e.switchTab({url:"/pages/mine/mine"}),n();case 4:case"end":return t.stop()}}),t)})))()}else if(500==t.data.code)e.showToast({title:"服务器连接失败，请反馈官方客服哦~",duration:2500,icon:"none"});else if(410==t.data.code){var c=o;(0,s.default)(a.default.mark((function e(){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.$store.dispatch("toLogon",{});case 2:c.toLogonRegister();case 3:case"end":return e.stop()}}),e)})))()}else e.showToast({title:t.data.msg,duration:2500,icon:"none"})},fail:function(t){e.showToast({title:"网络失败，请重试！多次无效后，反馈官方客服哦！",duration:2500,icon:"none"})}})}))},inspect:function(){var t=this.$store.state.theLogonUser;return this.parameters.school_ids=""==t.school_ids||null==t.school_ids?"":t.school_ids,this.parameters.intro=""==t.intro||null==t.intro?"":t.intro,this.parameters.nick_name=""==t.nick_name||null==t.nick_name?"":t.nick_name,this.parameters.avatar_url=""==t.avatar_url||null==t.avatar_url?"":t.avatar_url,this.parameters.birthday=""==t.birthday||null==t.birthday?"":t.birthday,this.parameters.specialty=""==t.specialty||null==t.specialty?"":t.specialty,""==this.parameters.name?(e.showToast({title:"请填写您的真实姓名哦~",duration:2500,icon:"none"}),!1):""==this.parameters.phone||11!=this.parameters.phone.length?(e.showToast({title:"请正确填写手机号码哦~",duration:2500,icon:"none"}),!1):this.parameters.phone!=t.phone&&""!=this.parameters.phone&&""==this.parameters.check_code?(e.showToast({title:"请获取并正确输入验证码~",duration:2500,icon:"none"}),!1):0==this.parameters.school_id?(e.showToast({title:"请选择您的学校哦~",duration:2500,icon:"none"}),!1):""!=this.parameters.grad_date||(e.showToast({title:"请填写您的毕业时间哦~",duration:2500,icon:"none"}),!1)},toAddress:function(){0==this.theLevel?e.navigateTo({url:"/pages/index/address?type=register"}):e.showToast({title:"提交后不可修改哦~",duration:2500,icon:"none"})}}};t.default=i}).call(this,n("543d")["default"])},c1b8:function(e,t,n){"use strict";(function(e,t){var o=n("4ea4");n("f290");o(n("66fd"));var a=o(n("0b51"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(a.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},ffe1:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return o}));var o={uniEasyinput:function(){return n.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(n.bind(null,"8708"))},uniIcons:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(n.bind(null,"beec"))},uniDatetimePicker:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker")]).then(n.bind(null,"f0fc"))}},a=function(){var e=this.$createElement,t=(this._self._c,0!=this.parameters.school_id?this.theschoolName.length:null),n=0==this.parameters.school_id||t<9?null:this.theschoolName.substring(0,9);this.$mp.data=Object.assign({},{$root:{g0:t,g1:n}})},s=[]}},[["c1b8","common/runtime","common/vendor"]]]);