(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"0f62":function(t,e,s){"use strict";s.r(e);var o=s("8ca7"),n=s("9dbf");for(var i in n)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(i);s("4374");var a=s("f0c5"),r=Object(a["a"])(n["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);e["default"]=r.exports},4374:function(t,e,s){"use strict";var o=s("e820"),n=s.n(o);n.a},"8ca7":function(t,e,s){"use strict";s.d(e,"b",(function(){return n})),s.d(e,"c",(function(){return i})),s.d(e,"a",(function(){return o}));var o={uniIcons:function(){return Promise.all([s.e("common/vendor"),s.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(s.bind(null,"beec"))},postTypeZudui:function(){return s.e("uni_modules/post-type-zudui/components/post-type-zudui/post-type-zudui").then(s.bind(null,"8625"))},uniLoadMore:function(){return Promise.all([s.e("common/vendor"),s.e("uni_modules/uni-load-more/components/uni-load-more/uni-load-more")]).then(s.bind(null,"db88"))},tabBar:function(){return s.e("uni_modules/tab-Bar/components/tab-Bar/tab-Bar").then(s.bind(null,"0d46"))}},n=function(){var t=this,e=t.$createElement,s=(t._self._c,void 0!=t.theAddress.title?t.theAddress.title.length:null),o=void 0==t.theAddress.title||s<4?null:t.theAddress.title.substring(0,3),n=""!=t.theSchool.title?t.theSchool.title.length:null,i=""==t.theSchool.title||n<5?null:t.theSchool.title.substring(0,4),a=t.titles.length;t._isMounted||(t.e0=function(e){return t.$public.disabled_tip("高级筛选")}),t.$mp.data=Object.assign({},{$root:{g0:s,g1:o,g2:n,g3:i,g4:a}})},i=[]},"9dbf":function(t,e,s){"use strict";s.r(e);var o=s("c85b"),n=s.n(o);for(var i in o)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return o[t]}))}(i);e["default"]=n.a},c85b:function(t,e,s){"use strict";(function(t){var o=s("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(s("2eee")),i=o(s("c973")),a={data:function(){return{theLevel:0,contentText:{contentdown:"查看更多",contentrefresh:"加载中...",contentnomore:"到底了，可点击此处手动加载~"},isLoading:"loading",theGetMomentsListPage:1,theGetMomentsListPagesize:10,titleName:["首页","校园墙"],theTitleIndex:1,schoolOneTitleIndex:0,statusBarHeight:0,navBarHeight:0,tabBarHeight:0,searchInputText:"",inputBottomHeight:0,titles:["综合","话题","组队/搭子","分享/安利","兼职","表白","求助","其他"],tempTitles:["综合","话题"],textWidths:0,tempAddressTitle:"",tempSchoolTitle:"",theAddress:{title:"",status:0,code:""},theSchool:{id:1,title:"",status:1,addr:"",create_id:1,update_id:1},school_datas:[]}},onLoad:function(){var t=this;this.getTopIconDistance(),this.tempAddressTitle=this.$store.state.store_addressNow.title,this.tempSchoolTitle=this.$store.state.store_schoolNow.title;var e=this.getStorageSync("storage_addressNow");this.$store.commit("changeStore_addressNow",{tempSelectedAddress:e}),(0,i.default)(n.default.mark((function e(){return n.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$store.commit("changeOnload",!1),t.theGetMomentsListPage=1,t.school_datas=[],e.next=5,t.getMomentsList();case 5:t.tempAddressTitle=t.$store.state.store_addressNow.title;case 6:case"end":return e.stop()}}),e)})))()},onShow:function(){this.theLevel=this.$store.state.theLogonUser.level,this.$store.commit("changePreviousPage",{previousPage:0,isPage_2:!1}),this.theAddress=this.$store.state.store_addressNow,this.theSchool=this.$store.state.store_schoolNow;var e=this;""!=e.theAddress.title&&void 0!=e.theAddress.title||t.showModal({title:"温馨提示：",content:"您当前还没有选择地区，点击“前往”将前往地区选择哦~",confirmText:"前往",confirmColor:"#f89f12",showCancel:!1,success:function(t){t.confirm&&e.toAddress()}}),e.tempAddressTitle&&e.tempAddressTitle!=e.theAddress.title&&void 0!=e.theAddress.title?(0,i.default)(n.default.mark((function t(){return n.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.theSchool={id:0,title:"",status:1,addr:"",create_id:1,update_id:1},e.$store.commit("changeStore_schoolNow",{id:0,title:"",status:1,addr:"",create_id:1,update_id:1}),e.theGetMomentsListPage=1,e.school_datas=[],t.next=6,e.getMomentsList("area");case 6:case"end":return t.stop()}}),t)})))():e.$store.state.isOnload?(0,i.default)(n.default.mark((function t(){return n.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("changeOnload",!1),e.theGetMomentsListPage=1,e.school_datas=[],t.next=5,e.getMomentsList();case 5:case"end":return t.stop()}}),t)})))():e.tempSchoolTitle!=e.theSchool.title&&(0,i.default)(n.default.mark((function t(){return n.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.theGetMomentsListPage=1,e.school_datas=[],t.next=4,e.getMomentsList("school");case 4:case"end":return t.stop()}}),t)})))()},onPullDownRefresh:function(){var e=this;e.theGetMomentsListPage=1,this.searchInputText="",e.school_datas=[],(0,i.default)(n.default.mark((function s(){return n.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.getMomentsList();case 2:t.stopPullDownRefresh();case 3:case"end":return s.stop()}}),s)})))()},onReachBottom:function(){this.isLoading="loading",this.getMomentsList()},methods:{animtionAction:function(){var t=this,e=setInterval((function(){t.$refs.theMessage.animtionAction()}),1e3);t.$store.commit("changeRedTip",{isRedTip:!0}),setTimeout((function(){clearInterval(e)}),5e3)},setStorageSync:function(e,s){try{t.setStorageSync(e,s)}catch(o){t.showToast({title:o,duration:2500,icon:"none"})}},getStorageSync:function(e){try{var s=t.getStorageSync(e);return s}catch(o){t.showToast({title:o,duration:2500,icon:"none"})}},getTopIconDistance:function(){var e=this;t.getSystemInfo({success:function(s){e.statusBarHeight=s.statusBarHeight||0;var o=t.getMenuButtonBoundingClientRect();e.navBarHeight=o.height+2*(o.top-e.statusBarHeight),e.tabBarHeight=s.screenHeight-s.safeArea.bottom,e.$store.commit("changeNavBarHeight",{statusBarHeight:e.statusBarHeight,navBarHeight:e.navBarHeight,tabBarHeight:e.tabBarHeight})},fail:function(t){}})},inputBindFocus:function(t){this.inputBottomHeight=t.detail.height},inputBindBlur:function(){this.inputBottomHeight=0},toTitleOne:function(e){0==e?t.showToast({title:"当前功能区暂未开放哦，敬请期待~",duration:2500,icon:"none"}):this.theTitleIndex=e},choiseOneTitle:function(t){this.schoolOneTitleIndex=t},emptyInput:function(t){"searchInputText"&&(this.searchInputText="")},toAddress:function(){t.navigateTo({url:"/pages/index/address?type=index"})},toSchool:function(){t.navigateTo({url:"/pages/index/school"})},toDetail:function(e){t.navigateTo({url:"/pages/index/detail?id="+e})},topPerSonalhome:function(e){2==e.is_anonymous?t.navigateTo({url:"/pages/follow/personalhome?id="+e.id}):t.showToast({title:"这个人很神秘，不想让你看到TA的主页~",duration:2500,icon:"none"})},getMomentsList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=this;return new Promise((function(o,a){var r=s;r.isLoading="loading",""!=r.$store.state.store_addressNow.title&&t.request({url:r.$store.state.theUrl+"/wechat/moments/getMomentsList",method:"POST",header:{token:r.$store.state.theToken},data:{page:r.theGetMomentsListPage,pagesize:r.theGetMomentsListPagesize,type:"",title:r.searchInputText,school_id:r.$store.state.store_schoolNow.id,area_code:r.$store.state.store_addressNow.code},success:function(s){var a=r;if(1==a.theGetMomentsListPage&&(a.school_datas=[]),"area"==e?a.tempAddressTitle=a.theAddress.title:"school"==e&&(a.tempSchoolTitle=a.$store.state.store_schoolNow.title),0==s.data.code)if(0!=s.data.data.length){for(var c=0;c<s.data.data.length;c++)a.school_datas.push(s.data.data[c]);a.isLoading="no-more",a.theGetMomentsListPage+=1,a.tempAddressTitle=a.theAddress.title,o()}else a.isLoading="no-more",o();else if(500==s.data.code)t.showToast({title:"服务器连接失败，请反馈官方客服哦~",duration:2500,icon:"none"});else if(410==s.data.code){var u=a;(0,i.default)(n.default.mark((function t(){return n.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u.$store.dispatch("toLogon",{});case 2:u.theGetMomentsListPage=1,u.getMomentsList(e);case 4:case"end":return t.stop()}}),t)})))()}else t.showToast({title:s.data.msg,duration:2500,icon:"none"})},fail:function(e){t.showToast({title:"网络失败，请重试！多次无效后，反馈官方客服哦！",duration:2500,icon:"none"})}})}))},searchPost:function(){this.school_datas=[],this.theGetMomentsListPage=1,this.getMomentsList()},toThumb:function(){var e=(0,i.default)(n.default.mark((function e(s){var o,i;return n.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=s.is_thumb,e.next=3,this.$store.dispatch("toThumb",{id:s.id,is_thumb:s.is_thumb});case 3:if(1==this.$store.state.is_thumb_true)for(i=0;i<this.school_datas.length;i++)s.id==this.school_datas[i].id&&(2==o?(this.$set(this.school_datas[i],"thumb_num",this.school_datas[i].thumb_num+1),this.$set(this.school_datas[i],"is_thumb",1),t.showToast({title:"点赞成功",duration:1e3,icon:"none"})):(this.$set(this.school_datas[i],"thumb_num",this.school_datas[i].thumb_num-1),this.$set(this.school_datas[i],"is_thumb",2),t.showToast({title:"已取消点赞",duration:1e3,icon:"none"})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),actionMore:function(e){var s=this,o=e.is_collection;t.showActionSheet({itemList:[2==e.is_collection?"收藏该内容":"取消收藏该内容","举报"],itemColor:"#f89f12",success:function(a){if(0==a.tapIndex){var r=s;(0,i.default)(n.default.mark((function s(){var i;return n.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,r.$store.dispatch("toCollection",{id:e.id});case 2:if(1==r.$store.state.is_collection_true)for(i=0;i<r.school_datas.length;i++)e.id==r.school_datas[i].id&&(2==o?(r.$set(r.school_datas[i],"is_collection",1),t.showToast({title:"收藏成功",duration:1e3,icon:"none"})):(r.$set(r.school_datas[i],"is_collection",2),t.showToast({title:"已取消收藏",duration:1e3,icon:"none"})));case 3:case"end":return s.stop()}}),s)})))()}else t.showToast({title:"举报成功",duration:1e3,icon:"none"})},fail:function(t){}})},zuduiButtons:function(){var e=(0,i.default)(n.default.mark((function e(s){var o,i;return n.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(1!=s.type){e.next=5;break}return o=s.is_entry,e.next=4,this.$store.dispatch("toEntry",{id:s.id,is_entry:s.is_entry});case 4:if(1==this.$store.state.is_entry_true)for(i=0;i<this.school_datas.length;i++)s.id==this.school_datas[i].id&&(2==o?(this.$set(this.school_datas[i],"entry_num",this.school_datas[i].entry_num+1),this.$set(this.school_datas[i],"is_entry",1),t.showToast({title:"加入成功",duration:1e3,icon:"none"})):(this.$set(this.school_datas[i],"entry_num",this.school_datas[i].entry_num-1),this.$set(this.school_datas[i],"is_entry",2),t.showToast({title:"已退出组队",duration:1e3,icon:"none"})));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}};e.default=a}).call(this,s("543d")["default"])},e318:function(t,e,s){"use strict";(function(t,e){var o=s("4ea4");s("f290");o(s("66fd"));var n=o(s("0f62"));t.__webpack_require_UNI_MP_PLUGIN__=s,e(n.default)}).call(this,s("bc2e")["default"],s("543d")["createPage"])},e820:function(t,e,s){}},[["e318","common/runtime","common/vendor"]]]);