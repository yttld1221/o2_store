require('../../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["page_product/pages/search/searchResult"],{"17de":function(e,t,r){"use strict";(function(e){var n=r("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r("9523"));function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var a={components:{},data:function(){return{orderType:"desc",order_field:"sort",isLoading:"loading",pxList:[{label:"综合",type:"sort"},{label:"销量",type:"sale_num"},{label:"价格",type:"sale_price"}],theGetMomentsListPage:1,theGetMomentsListPagesize:4,searchText:"",searchRecord:[],contentText:{contentdown:"查看更多",contentrefresh:"加载中...",contentnomore:"到底了，可点击此处手动加载~"},list:[],contentHeight:0}},onLoad:function(t){var r=this,n=e.createSelectorQuery().in(this);n.select(".top-fixd").boundingClientRect((function(e){r.contentHeight=e.height})).exec(),t.text&&(this.searchText=t.text,this.searchReasult())},onReachBottom:function(){this.isLoading="loading",this.getList()},methods:{changeType:function(e,t){this.order_field==e.type&&2!=t||(this.order_field=e.type,this.orderType=2==t&&"desc"==this.orderType?"asc":"desc",this.theGetMomentsListPage=1,this.list=[],this.isLoading="loading",this.getList())},goDetail:function(t){e.navigateTo({url:"/page_product/pages/product/detail?id="+t.id})},changeText:function(t){t||e.navigateBack()},cancel:function(){e.navigateBack({delta:2})},getSearchRecord:function(){if(this.searchRecord=e.getStorageSync("searchRecord")?JSON.parse(e.getStorageSync("searchRecord")):[]||!1,this.searchRecord.length>0)for(var t in this.searchRecord)t>9&&this.searchRecord.splice(t,1)},getList:function(){var e=this,t={page:this.theGetMomentsListPage,pagesize:this.theGetMomentsListPagesize,title:this.searchText,order_type:this.orderType,order_field:this.order_field};this.API.home.getTaskList(t).then((function(t){if(console.log(t),1==e.theGetMomentsListPage&&(e.list=[]),0!=t.data.length){for(var r=0;r<t.data.length;r++)e.list.push(s(s({},t.data[r]),{},{img_url:t.data[r].img_url?t.data[r].img_url.split(",")[0]:""}));e.isLoading="no-more",e.theGetMomentsListPage+=1}else e.isLoading="no-more"}))},searchReasult:function(){if(this.searchText){for(var t in this.getSearchRecord(),this.searchRecord)this.searchText==this.searchRecord[t].value&&this.searchRecord.splice(t,1);this.searchRecord.unshift({value:this.searchText}),e.setStorageSync("searchRecord",JSON.stringify(this.searchRecord)),this.getList()}}}};t.default=a}).call(this,r("543d")["default"])},"3489f":function(e,t,r){"use strict";var n=r("576e"),i=r.n(n);i.a},"576e":function(e,t,r){},"80d8":function(e,t,r){"use strict";(function(e,t){var n=r("4ea4");r("f290");n(r("66fd"));var i=n(r("a319"));e.__webpack_require_UNI_MP_PLUGIN__=r,t(i.default)}).call(this,r("bc2e")["default"],r("543d")["createPage"])},a319:function(e,t,r){"use strict";r.r(t);var n=r("b2f9"),i=r("f1dd");for(var o in i)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return i[e]}))}(o);r("3489f");var s=r("f0c5"),a=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"08dd6d9f",null,!1,n["a"],void 0);t["default"]=a.exports},b2f9:function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return n}));var n={uSearch:function(){return Promise.all([r.e("common/vendor"),r.e("uni_modules/uview-ui/components/u-search/u-search")]).then(r.bind(null,"4f1c"))},uniLoadMore:function(){return Promise.all([r.e("common/vendor"),r.e("uni_modules/uni-load-more/components/uni-load-more/uni-load-more")]).then(r.bind(null,"db88"))}},i=function(){var e=this.$createElement;this._self._c},o=[]},f1dd:function(e,t,r){"use strict";r.r(t);var n=r("17de"),i=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t["default"]=i.a}},[["80d8","common/runtime","common/vendor"]]]);