{"version":3,"sources":["uni-app:///main.js","webpack:///D:/ouying/o2_store/page_product/pages/mall/index.vue?55d1","webpack:///D:/ouying/o2_store/page_product/pages/mall/index.vue?0d57","webpack:///D:/ouying/o2_store/page_product/pages/mall/index.vue?e110","webpack:///D:/ouying/o2_store/page_product/pages/mall/index.vue?2c38","uni-app:///page_product/pages/mall/index.vue","webpack:///D:/ouying/o2_store/page_product/pages/mall/index.vue?4394","webpack:///D:/ouying/o2_store/page_product/pages/mall/index.vue?3519"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","postZudui","data","schoolOneTitleIndex","titles","userInfo","isLoading","theGetMomentsListPage","theGetMomentsListPagesize","contentText","contentdown","contentrefresh","contentnomore","current","list","label","value","id","userId","theLogonUser","contentHeight","shopList","onPullDownRefresh","uni","onReachBottom","onLoad","query","select","boundingClientRect","exec","methods","toFans","url","toSearch","getTime","actionMore","itemList","option","itemColor","success","_that","title","duration","icon","fail","zuduiButtons","temp_is_entry","is_entry","temp_is_thumb","is_thumb","item","regard","to_user_id","then","console","catch","err","index","res","params","page","pagesize","shop_id","is_product","create_id","img_url","getHomePageTop","user_id"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AACsK;AACtK,gBAAgB,6KAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,aAAa,0VAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC/CA;AAAA;AAAA;AAAA;AAAinB,CAAgB,+mBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eC6HroB;EACAC;IAAAC;EAAA;EACAC;IACA;MACAC;MACAC,SACA,MACA,MACA,SACA,SACA,MACA,MACA,MACA,KACA;MACAC;MACAC;MACA;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;MACA;MACAC;MACAC,OACA;QACAC;QACAC;MACA,GACA;QACAD;QACAC;MACA,EACA;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACA;EACAC;IAAA;IACA;IACA;IACA;IACA;IACA;IACA;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA,OACA;YAAA;cACA;cACAC;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CACA;EACA;EACAC;IACA;IACA;IACA;EACA;EACAC;IAAA;IACA;IACAC,MACAC,oBACAC;MACA;IACA,GACAC;IACA;MACA;MACA;MACA;IACA;EACA;EACAC;IACAC;MACAR;QACAS,KACA,2CACA,cACA,WACA;MACA;IACA;IACAC;MACAV;QACAS;MACA;IACA;IACA;IACAE;MACA;IACA;IACA;IACAC;MACA;MACA;MACAZ;QACAa,WACAC,iDACA,KACA;QACAC;QACAC;UACA;UACA;YACA;YACA;cAAA;cAAA;gBAAA;kBAAA;oBAAA;sBAAA;sBAAA,OACAC;wBACAvB;sBACA;oBAAA;sBAEA;wBACA;wBACA;0BACA;4BACA;8BACA;8BACAuB;8BACAjB;gCACAkB;gCACAC;gCACAC;8BACA;4BACA;8BACAH;8BACAjB;gCACAkB;gCACAC;gCACAC;8BACA;4BACA;0BACA;wBACA;sBACA;oBAAA;oBAAA;sBAAA;kBAAA;gBAAA;cAAA;YAAA,CACA;UACA;YACApB;cACAkB;cACAC;cACAC;YACA;UACA;QACA;QACAC;UACA;QAAA;MAEA;IACA;IAEA;IACAC;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,MACAR;kBAAA;kBAAA;gBAAA;gBACA;gBACA;gBACAS;gBAAA;gBAAA,OACA;kBACA7B;kBACA8B;gBACA;cAAA;gBAEA;gBACA;kBACA;oBACA;sBACA;wBACA;wBACA,UACA,sBACA,aACA,mCACA;wBACA;wBACAxB;0BACAkB;0BACAC;0BACAC;wBACA;sBACA;wBACA,UACA,sBACA,aACA,mCACA;wBACA;wBACApB;0BACAkB;0BACAC;0BACAC;wBACA;sBACA;oBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CAEA;MAAA;QAAA;MAAA;MAAA;IAAA;EAAA,yDAEA;IACA;IACA;IACApB;MACAa,WACAC,iDACA,KACA;MACAC;MACAC;QACA;QACA;UACA;UACA;YAAA;YAAA;cAAA;gBAAA;kBAAA;oBAAA;oBAAA,OACAC;sBACAvB;oBACA;kBAAA;oBAEA;sBACA;sBACA;wBACA;0BACA;4BACA;4BACAuB;4BACAjB;8BACAkB;8BACAC;8BACAC;4BACA;0BACA;4BACAH;4BACAjB;8BACAkB;8BACAC;8BACAC;4BACA;0BACA;wBACA;sBACA;oBACA;kBAAA;kBAAA;oBAAA;gBAAA;cAAA;YAAA;UAAA,CACA;QACA;UACApB;YACAkB;YACAC;YACAC;UACA;QACA;MACA;MACAC;QACA;MAAA;IAEA;EACA;IAAA,uFACA;MAAA;MAAA;QAAA;UAAA;YAAA;cACA;cACA;cACAI;cAAA;cAAA,OACA;gBACA/B;gBACAgC;cACA;YAAA;cAEA;cACA;gBACA;kBACA;oBACA;sBACA;sBACA,UACA,sBACA,aACA,mCACA;sBACA;sBACA1B;wBACAkB;wBACAC;wBACAC;sBACA;oBACA;sBACA,UACA,sBACA,aACA,mCACA;sBACA;sBACApB;wBACAkB;wBACAC;wBACAC;sBACA;oBACA;kBACA;gBACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CACA;IAAA;MAAA;IAAA;IAAA;EAAA,iEAEA;IACA;MACA;MACApB;QACAS;MACA;IACA;MACAT;QACAkB;QACAC;QACAC;MACA;IACA;EACA,wDAEA;IACApB;MACAS;IACA;EACA,0EAEAkB;IACA3B;MACAS;IACA;EACA,oFAEA;IAAA;IACA,eACAmB;MACAC;IACA,GACAC;MACAC;MACA;IACA,GACAC;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,MACAC;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACA;cAAA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CAEA;MAAA;QAAA;MAAA;IAAA;EACA,4EAEAC;IACAH;IACA;IACA;IACA;IACA;IACA;IACA;EACA,0EAEA;IAAA;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cACA;cACAI;cACAC;gBACAC;gBACAC;cACA;cAAA;cAAA,MAGA;gBAAA;gBAAA;cAAA;cACAF;gBAAAG;gBAAAC;cAAA;cAAA;cAAA,OACA;YAAA;cAAAL;cAAA;cAAA;YAAA;cAEAC;gBAAAK;cAAA;cAAA;cAAA,OACA;YAAA;cAAAN;YAAA;cAEA;gBACAJ;gBACA;gBACA;kBACA;gBACA;gBACA;kBACA;oBACA,qDACAI;sBACAO,+BACAP,oCACA;oBAAA,GACA;kBACA;kBACA;kBACA;kBACA;gBACA;kBACA;gBACA;cACA;cAAA;cAAA;YAAA;cAAA;cAAA;cAAA,MAEA;gBAAA;gBAAA;cAAA;cAAA;cAAA,OACA;YAAA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAGA,8EAEA;IAAA;IAAA;IACA,eACAQ;MACAC;MACAL;IACA,GACAT;MACAC;MACA;MACA;MACA;QACA;MACA;IACA,GACAC;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,MACAC;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACA;cAAA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CAEA;MAAA;QAAA;MAAA;IAAA;EACA;AAEA;AAAA,2B;;;;;;;;;;;;;AChiBA;AAAA;AAAA;AAAA;AAAgsC,CAAgB,snCAAG,EAAC,C;;;;;;;;;;;ACAptC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"page_product/pages/mall/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './page_product/pages/mall/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=321ac974&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=321ac974&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"321ac974\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"page_product/pages/mall/index.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=321ac974&scoped=true&\"","var components\ntry {\n  components = {\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-icon/u-icon\" */ \"@/uni_modules/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uniLoadMore: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-load-more/components/uni-load-more/uni-load-more\" */ \"@/uni_modules/uni-load-more/components/uni-load-more/uni-load-more.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.getTime()\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"mall\">\n    <view class=\"mall-top\">\n      <view class=\"info-container\">\n        <view class=\"info-name flex-algin\">\n          <view class=\"info-name-left flex-algin\">\n            <image mode=\"aspectFill\" :src=\"userInfo.avatar_url\"></image>\n            <view class=\"name-box flex-algin\">\n              <view class=\"name-text\">{{ userInfo.nick_name }}</view>\n              <view class=\"time-text\">{{ getTime() }}在线过</view>\n            </view>\n          </view>\n        </view>\n        <view class=\"info-desc\">{{\n          userInfo.intro ? userInfo.intro : \"这家伙很神秘，没有写个人简介。\"\n        }}</view>\n        <view class=\"info-school flex-algin\">\n          <view class=\"info-school-name info-school-box flex-algin\">\n            <image src=\"/static/1_school_icon@3x.png\" mode=\"widthFix\"></image>\n            {{ userInfo.school_name }}</view\n          >\n          <view\n            v-if=\"theLogonUser.specialty\"\n            class=\"info-school-major info-school-box flex-algin\"\n            >{{ theLogonUser.specialty }}</view\n          >\n        </view>\n        <view class=\"other-info flex-algin\">\n          <view class=\"other-info-left flex-algin\">\n            <view class=\"flex-algin\"\n              ><text>{{ userInfo.regard_num }}</text\n              >关注</view\n            >\n            <view @click=\"toFans()\" class=\"mar-l-50 flex-algin\"\n              ><text>{{ userInfo.fans_num }}</text\n              >粉丝</view\n            >\n          </view>\n          <view\n            :style=\"{ visibility: id != theLogonUser.shop_id ? '' : 'hidden' }\"\n            @click=\"followHandle()\"\n            class=\"other-info-right\"\n            :class=\"{ 'is-regard': userInfo.is_regard == 1 }\"\n            >{{ userInfo.is_regard == 1 ? \"取消关注\" : \"关注\" }}</view\n          >\n        </view>\n      </view>\n      <view class=\"tab-container flex-algin\">\n        <view class=\"tab-box flex-algin\">\n          <view\n            @click=\"changeTab(index)\"\n            class=\"tab-item\"\n            :class=\"{ choose: current == index }\"\n            v-for=\"(item, index) in list\"\n            :key=\"index\"\n          >\n            <view class=\"heng\" v-if=\"current == index\"></view>\n            <text>{{ item.label }}</text>\n          </view>\n        </view>\n        <u-icon\n          @click=\"toSearch()\"\n          name=\"search\"\n          color=\"#333333\"\n          size=\"23\"\n        ></u-icon>\n      </view>\n    </view>\n    <view :style=\"'margin-top:' + contentHeight + 'px;'\" class=\"list-box\">\n      <view class=\"shop-list-box\" v-if=\"current == 0\">\n        <view\n          @click=\"goDetail(item)\"\n          class=\"list-item\"\n          v-for=\"(item, index) in shopList\"\n          :key=\"index\"\n        >\n          <view class=\"image-box\">\n            <image mode=\"aspectFill\" :src=\"item.img_url\" />\n          </view>\n          <view class=\"list-item-info\">\n            <view class=\"list-item-title\">{{ item.title }}</view>\n            <view class=\"list-item-price flex-algin\">\n              <view class=\"list-item-price-left\"\n                >¥<text style=\"font-size: 34rpx\">{{\n                  item.sale_price\n                }}</text></view\n              >\n              <view class=\"list-item-price-right\"\n                >已售：{{ item.sale_num }}</view\n              >\n            </view>\n          </view>\n        </view>\n      </view>\n      <view v-else>\n        <view class=\"posts-data\" v-for=\"(item, index) in shopList\">\n          <post-zudui\n            @toDetail=\"toDetail\"\n            @topPerSonalhome=\"topPerSonalhome\"\n            @toThumb=\"toThumb\"\n            @actionMore=\"actionMore\"\n            @zuduiButtons=\"zuduiButtons\"\n            v-if=\"\n              titles[schoolOneTitleIndex] == item.type ||\n              titles[schoolOneTitleIndex] == '综合'\n            \"\n            :postsDataOneIndex=\"index\"\n            :theData=\"item\"\n          ></post-zudui>\n        </view>\n      </view>\n    </view>\n    <!-- 底部垫层 -->\n    <view @click=\"getList()\" class=\"space-line-bottom\">\n      <uni-load-more\n        :status=\"isLoading\"\n        :content-text=\"contentText\"\n      ></uni-load-more>\n    </view>\n    <view class=\"safe-bottom\"></view>\n  </view>\n</template>\n\n<script>\nimport postZudui from \"../../components/postZudui.vue\";\nexport default {\n  components: { postZudui },\n  data() {\n    return {\n      schoolOneTitleIndex: 0,\n      titles: [\n        \"综合\",\n        \"话题\",\n        \"组队/搭子\",\n        \"分享/安利\",\n        \"兼职\",\n        \"表白\",\n        \"求助\",\n        \"其他\",\n      ],\n      userInfo: {},\n      isLoading: \"loading\",\n      // 当前获取的校园墙页码，每次需要+1\n      theGetMomentsListPage: 1,\n      theGetMomentsListPagesize: 4,\n      contentText: {\n        contentdown: \"查看更多\",\n        contentrefresh: \"加载中...\",\n        contentnomore: \"到底了，可点击此处手动加载~\",\n      },\n      current: 0,\n      list: [\n        {\n          label: \"店铺\",\n          value: 0,\n        },\n        {\n          label: \"动态\",\n          value: 1,\n        },\n      ],\n      id: \"\",\n      userId: \"\",\n      theLogonUser: {},\n      contentHeight: 0,\n      shopList: [],\n    };\n  },\n  // 监听下拉动作\n  onPullDownRefresh() {\n    // 重置获取的页码\n    this.theGetMomentsListPage = 1;\n    // 重置数组\n    this.shopList = [];\n    // 异步转同步调用\n    (async () => {\n      await this.getList();\n      // 等待接口返回后，取消下拉刷新动画\n      uni.stopPullDownRefresh();\n    })();\n  },\n  onReachBottom() {\n    // 触底后动画效果开启\n    this.isLoading = \"loading\";\n    this.getList();\n  },\n  onLoad(options) {\n    let query = uni.createSelectorQuery().in(this);\n    query\n      .select(\".mall-top\")\n      .boundingClientRect((data) => {\n        this.contentHeight = data.height;\n      })\n      .exec();\n    if (options.id) {\n      this.id = options.id;\n      this.userId = options.userId;\n      this.getDetail();\n    }\n  },\n  methods: {\n    toFans() {\n      uni.navigateTo({\n        url:\n          \"/page_product/pages/fans/index?userId=\" +\n          this.userId +\n          \"&name=\" +\n          this.userInfo.nick_name,\n      });\n    },\n    toSearch() {\n      uni.navigateTo({\n        url: \"/page_product/pages/search/index?shopId=\" + this.id,\n      });\n    },\n    // 转换时间\n    getTime() {\n      return this.$public.showDateTime(this.userInfo.last_login_at);\n    },\n    //打开三个点的操作\n    actionMore: function (option) {\n      let that = this;\n      let temp_is_collection = option.is_collection;\n      uni.showActionSheet({\n        itemList: [\n          option.is_collection == 2 ? \"收藏该内容\" : \"取消收藏该内容\",\n          \"举报\",\n        ],\n        itemColor: \"#f89f12\",\n        success: function (res) {\n          // console.log(res.tapIndex);\n          if (res.tapIndex == 0) {\n            let _that = that;\n            (async function () {\n              await _that.$store.dispatch(\"toCollection\", {\n                id: option.id,\n              });\n\n              if (_that.$store.state.is_collection_true == true) {\n                // 表示调用接口成功\n                for (let i = 0; i < _that.school_datas.length; i++) {\n                  if (option.id == _that.school_datas[i].id) {\n                    if (temp_is_collection == 2) {\n                      // 使用$set响应的改变对象数据，第一个参数是对象本身，第二个参数是属性（记得加引号），第三个是改变后的值\n                      _that.$set(_that.school_datas[i], \"is_collection\", 1);\n                      uni.showToast({\n                        title: \"收藏成功\",\n                        duration: 1000,\n                        icon: \"none\",\n                      });\n                    } else {\n                      _that.$set(_that.school_datas[i], \"is_collection\", 2);\n                      uni.showToast({\n                        title: \"已取消收藏\",\n                        duration: 1000,\n                        icon: \"none\",\n                      });\n                    }\n                  }\n                }\n              }\n            })();\n          } else {\n            uni.showToast({\n              title: \"举报成功\",\n              duration: 1000,\n              icon: \"none\",\n            });\n          }\n        },\n        fail: function (res) {\n          // console.log(res.errMsg);\n        },\n      });\n    },\n\n    // 邀请/组队按钮\n    zuduiButtons: async function (option) {\n      if (option.type == 1) {\n        // 1表示是组队的按钮\n        // 这是保存一下当前本人的加入状态，用于判断最后本地是显示加入还是退出\n        let temp_is_entry = option.is_entry;\n        await this.$store.dispatch(\"toEntry\", {\n          id: option.id,\n          is_entry: option.is_entry,\n        });\n\n        // console.log('this.$store.state.is_entry_true ',this.$store.state.is_entry_true );\n        if (this.$store.state.is_entry_true == true) {\n          for (let i = 0; i < this.school_datas.length; i++) {\n            if (option.id == this.school_datas[i].id) {\n              if (temp_is_entry == 2) {\n                // 使用$set响应的改变对象数据，第一个参数是对象本身，第二个参数是属性（记得加引号），第三个是改变后的值\n                this.$set(\n                  this.school_datas[i],\n                  \"entry_num\",\n                  this.school_datas[i].entry_num + 1\n                );\n                this.$set(this.school_datas[i], \"is_entry\", 1);\n                uni.showToast({\n                  title: \"加入成功\",\n                  duration: 1000,\n                  icon: \"none\",\n                });\n              } else {\n                this.$set(\n                  this.school_datas[i],\n                  \"entry_num\",\n                  this.school_datas[i].entry_num - 1\n                );\n                this.$set(this.school_datas[i], \"is_entry\", 2);\n                uni.showToast({\n                  title: \"已退出组队\",\n                  duration: 1000,\n                  icon: \"none\",\n                });\n              }\n            }\n          }\n        }\n      }\n    },\n    //打开三个点的操作\n    actionMore: function (option) {\n      let that = this;\n      let temp_is_collection = option.is_collection;\n      uni.showActionSheet({\n        itemList: [\n          option.is_collection == 2 ? \"收藏该内容\" : \"取消收藏该内容\",\n          \"举报\",\n        ],\n        itemColor: \"#f89f12\",\n        success: function (res) {\n          // console.log(res.tapIndex);\n          if (res.tapIndex == 0) {\n            let _that = that;\n            (async function () {\n              await _that.$store.dispatch(\"toCollection\", {\n                id: option.id,\n              });\n\n              if (_that.$store.state.is_collection_true == true) {\n                // 表示调用接口成功\n                for (let i = 0; i < _that.school_datas.length; i++) {\n                  if (option.id == _that.school_datas[i].id) {\n                    if (temp_is_collection == 2) {\n                      // 使用$set响应的改变对象数据，第一个参数是对象本身，第二个参数是属性（记得加引号），第三个是改变后的值\n                      _that.$set(_that.school_datas[i], \"is_collection\", 1);\n                      uni.showToast({\n                        title: \"收藏成功\",\n                        duration: 1000,\n                        icon: \"none\",\n                      });\n                    } else {\n                      _that.$set(_that.school_datas[i], \"is_collection\", 2);\n                      uni.showToast({\n                        title: \"已取消收藏\",\n                        duration: 1000,\n                        icon: \"none\",\n                      });\n                    }\n                  }\n                }\n              }\n            })();\n          } else {\n            uni.showToast({\n              title: \"举报成功\",\n              duration: 1000,\n              icon: \"none\",\n            });\n          }\n        },\n        fail: function (res) {\n          // console.log(res.errMsg);\n        },\n      });\n    },\n    toThumb: async function (option) {\n      // 这里之所以又加了一层，是为了拿到子组件传过来的option\n      // 这是保存一下当前本人的点赞状态，用于判断最后本地是增加还是减少点赞数的\n      let temp_is_thumb = option.is_thumb;\n      await this.$store.dispatch(\"toThumb\", {\n        id: option.id,\n        is_thumb: option.is_thumb,\n      });\n\n      // console.log('this.$store.state.is_thumb_true ',this.$store.state.is_thumb_true );\n      if (this.$store.state.is_thumb_true == true) {\n        for (let i = 0; i < this.school_datas.length; i++) {\n          if (option.id == this.school_datas[i].id) {\n            if (temp_is_thumb == 2) {\n              // 使用$set响应的改变对象数据，第一个参数是对象本身，第二个参数是属性（记得加引号），第三个是改变后的值\n              this.$set(\n                this.school_datas[i],\n                \"thumb_num\",\n                this.school_datas[i].thumb_num + 1\n              );\n              this.$set(this.school_datas[i], \"is_thumb\", 1);\n              uni.showToast({\n                title: \"点赞成功\",\n                duration: 1000,\n                icon: \"none\",\n              });\n            } else {\n              this.$set(\n                this.school_datas[i],\n                \"thumb_num\",\n                this.school_datas[i].thumb_num - 1\n              );\n              this.$set(this.school_datas[i], \"is_thumb\", 2);\n              uni.showToast({\n                title: \"已取消点赞\",\n                duration: 1000,\n                icon: \"none\",\n              });\n            }\n          }\n        }\n      }\n    },\n    // 跳转主页\n    topPerSonalhome: function (option) {\n      if (option.is_anonymous == 2) {\n        // 不匿名\n        uni.navigateTo({\n          url: \"/pages/follow/personalhome?id=\" + option.id,\n        });\n      } else {\n        uni.showToast({\n          title: \"这个人很神秘，不想让你看到TA的主页~\",\n          duration: 2500,\n          icon: \"none\",\n        });\n      }\n    },\n    // 跳转详情页\n    toDetail: function (id) {\n      uni.navigateTo({\n        url: \"/pages/index/detail?id=\" + id,\n      });\n    },\n    // 跳转详情\n    goDetail(item) {\n      uni.navigateTo({\n        url: \"/page_product/pages/product/detail?id=\" + item.id,\n      });\n    },\n    // 关注\n    followHandle() {\n      this.API.order\n        .regard({\n          to_user_id: this.userInfo.id,\n        })\n        .then((res) => {\n          console.log(res.data);\n          this.getDetail(\"follow\");\n        })\n        .catch(async (err) => {\n          if (err.code == 410) {\n            await this.$store.dispatch(\"toLogon\", {});\n            this.followHandle();\n          }\n        });\n    },\n    // 切换tab\n    changeTab(index) {\n      console.log(index);\n      this.current = index;\n      // 重置获取的页码\n      this.theGetMomentsListPage = 1;\n      // 重置数组\n      this.shopList = [];\n      this.getList();\n    },\n    // 获取列表\n    async getList() {\n      this.isLoading = \"loading\";\n      let res = \"\";\n      let params = {\n        page: this.theGetMomentsListPage,\n        pagesize: this.theGetMomentsListPagesize,\n      };\n      try {\n        // 使用数据\n        if (this.current == 0) {\n          params = { ...params, shop_id: this.id, is_product: 1 };\n          res = await this.API.home.getTaskList(params);\n        } else {\n          params = { ...params, create_id: this.userId };\n          res = await this.API.order.getMomentsList(params);\n        }\n        if (res.code == 0) {\n          console.log(res);\n          // 如果是请求第一页，证明是首次请求，就重置一下\n          if (this.theGetMomentsListPage == 1) {\n            this.shopList = [];\n          }\n          if (res.data.length != 0) {\n            for (let i = 0; i < res.data.length; i++) {\n              this.shopList.push({\n                ...res.data[i],\n                img_url: res.data[i].img_url\n                  ? res.data[i].img_url.split(\",\")[0]\n                  : \"\",\n              });\n            }\n            this.isLoading = \"no-more\"; // 取消加载动画\n            // 页面+1\n            this.theGetMomentsListPage += 1;\n          } else {\n            this.isLoading = \"no-more\"; // 取消加载动画\n          }\n        }\n      } catch (error) {\n        if (error.code == 410) {\n          await this.$store.dispatch(\"toLogon\", {});\n          this.getList();\n        }\n      }\n    },\n    // 获取详情\n    getDetail(type = \"\") {\n      this.API.order\n        .getHomePageTop({\n          user_id: this.userId,\n          shop_id: this.id,\n        })\n        .then((res) => {\n          console.log(res.data);\n          this.userInfo = res.data;\n          this.theLogonUser = this.$store.state.theLogonUser;\n          if (!type) {\n            this.getList();\n          }\n        })\n        .catch(async (err) => {\n          if (err.code == 410) {\n            await this.$store.dispatch(\"toLogon\", {});\n            this.getDetail();\n          }\n        });\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.mall {\n  box-sizing: border-box;\n  overflow: hidden;\n  .mall-top {\n    top: 0;\n    background-image: url(\"https://schoolwx.oss-cn-hangzhou.aliyuncs.com/school/img/v2/20240524/2024-05-24_15_28_09_refund_0_22.png\");\n    width: 100%;\n    background-repeat: no-repeat;\n    background-size: 100% 100%;\n    position: fixed;\n    z-index: 10;\n    .info-container {\n      padding: 30rpx 30rpx 0;\n      .info-name {\n        justify-content: space-between;\n        .info-name-left {\n          image {\n            border-radius: 100%;\n            width: 130rpx;\n            height: 130rpx;\n          }\n          .name-box {\n            justify-content: center;\n            align-items: flex-start;\n            margin-left: 30rpx;\n            flex-direction: column;\n            .name-text {\n              font-family: PingFang SC;\n              font-weight: 600;\n              font-size: 38rpx;\n              color: #333333;\n              margin-bottom: 25rpx;\n            }\n            .time-text {\n              font-family: PingFang SC;\n              font-weight: 400;\n              font-size: 22rpx;\n              color: #666666;\n            }\n          }\n        }\n      }\n      .info-desc {\n        font-family: PingFang SC;\n        font-weight: 400;\n        font-size: 26rpx;\n        color: #333333;\n        margin-top: 37rpx;\n      }\n      .info-school {\n        margin-top: 33rpx;\n        .info-school-box {\n          background: rgba(237, 244, 238, 1);\n          border-radius: 30rpx;\n          padding: 9rpx 21rpx;\n          justify-content: center;\n          font-family: PingFang SC;\n          font-weight: 400;\n          font-size: 22rpx;\n          color: #666666;\n        }\n        .info-school-name {\n          image {\n            width: 30rpx;\n            height: 30rpx;\n            margin-right: 9rpx;\n          }\n        }\n        .info-school-major {\n          margin-left: 20rpx;\n        }\n      }\n      .other-info {\n        justify-content: space-between;\n        margin-top: 19rpx;\n        .other-info-left {\n          line-height: 20rpx;\n          font-family: PingFang SC;\n          font-weight: 400;\n          font-size: 24rpx;\n          color: #000000;\n          text {\n            font-family: Myriad Pro;\n            font-weight: 400;\n            font-size: 34rpx;\n            color: #000000;\n            margin-right: 15rpx;\n          }\n          .mar-l-50 {\n            margin-left: 50rpx;\n          }\n        }\n        .other-info-right {\n          padding: 15rpx 30rpx;\n          background: #f89f12;\n          border-radius: 50rpx;\n          font-family: PingFang SC;\n          font-weight: 400;\n          font-size: 26rpx;\n          color: #ffffff;\n        }\n        .is-regard {\n          background: #bbbbbb;\n        }\n      }\n    }\n    .tab-container {\n      justify-content: space-between;\n      margin-top: 30rpx;\n      background: #ffffff;\n      border-radius: 40rpx 40rpx 0 0;\n      padding: 30rpx 30rpx 0;\n      .tab-box {\n        .tab-item {\n          display: flex;\n          justify-content: center;\n          position: relative;\n          margin-right: 45rpx;\n          text {\n            font-family: PingFang SC;\n            font-weight: 400;\n            font-size: 32rpx;\n            color: #333333;\n            line-height: 37rpx;\n            z-index: 1;\n            position: relative;\n          }\n          .heng {\n            bottom: 0;\n            position: absolute;\n            width: 64rpx;\n            height: 10rpx;\n            background: #ff812f;\n          }\n        }\n        .tab-item:last-child {\n          margin-right: 0;\n        }\n        .choose {\n          text {\n            font-family: PingFang SC;\n            font-weight: 600;\n            font-size: 32rpx;\n            color: #333333;\n          }\n        }\n      }\n    }\n  }\n  .list-box {\n    padding: 36rpx 30rpx 0;\n    .shop-list-box {\n      display: flex;\n      justify-content: space-between;\n      flex-wrap: wrap;\n      box-sizing: border-box;\n      .list-item {\n        margin-bottom: 20rpx;\n        width: 335rpx;\n        border-radius: 10rpx 10rpx 0rpx 0rpx;\n        .image-box {\n          background: #ffffff;\n          border-radius: 10rpx 10rpx 0rpx 0rpx;\n          width: 335rpx;\n          height: 335rpx;\n          z-index: 1;\n          position: relative;\n          image {\n            border-radius: 10rpx 10rpx 0rpx 0rpx;\n            width: 335rpx;\n            height: 335rpx;\n          }\n        }\n        .list-item-info {\n          margin-top: -15rpx;\n          padding: 30rpx 21rpx 32rpx;\n          background: #ffffff;\n          box-shadow: 0rpx 0rpx 7rpx 1rpx rgba(0, 0, 0, 0.04);\n          border-radius: 0 0 10rpx 10rpx;\n          border: 1px solid #f4f4f4;\n          border-top: none;\n          .list-item-title {\n            width: 100%;\n            white-space: nowrap;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            font-family: PingFang SC;\n            font-weight: 500;\n            font-size: 24rpx;\n            color: #393a3e;\n            margin-bottom: 24rpx;\n          }\n          .list-item-price {\n            display: flex;\n            justify-content: space-between;\n            align-items: flex-end;\n            .list-item-price-left {\n              font-family: PingFang SC;\n              font-weight: 300;\n              font-size: 22rpx;\n              color: #f23333;\n              line-height: 24rpx;\n            }\n            .list-item-price-right {\n              font-family: PingFang SC;\n              font-weight: 400;\n              font-size: 22rpx;\n              color: #999999;\n            }\n          }\n        }\n      }\n    }\n    .posts-data {\n      position: relative;\n      z-index: 1;\n    }\n  }\n  .flex-algin {\n    display: flex;\n    align-items: center;\n  }\n  .safe-bottom {\n    padding-bottom: env(safe-area-inset-bottom);\n  }\n}\n</style>","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=321ac974&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=321ac974&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1718259268860\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}