{"version":3,"sources":["uni-app:///main.js","webpack:///D:/ouying/o2_store/page_product/pages/order/index.vue?2f4b","webpack:///D:/ouying/o2_store/page_product/pages/order/index.vue?e045","webpack:///D:/ouying/o2_store/page_product/pages/order/index.vue?5210","webpack:///D:/ouying/o2_store/page_product/pages/order/index.vue?e994","uni-app:///page_product/pages/order/index.vue","webpack:///D:/ouying/o2_store/page_product/pages/order/index.vue?97e2","webpack:///D:/ouying/o2_store/page_product/pages/order/index.vue?3642"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","data","clickAble","content","delId","handleIndex","show","contentText","contentdown","contentrefresh","contentnomore","isLoading","btnText","statusText","refundText","line_4_items","label","value","current","theGetMomentsListPage","theGetMomentsListPagesize","orderList","contentHeight","onLoad","query","select","boundingClientRect","exec","uni","console","onShow","onReachBottom","onPullDownRefresh","methods","confirmDel","res","id","title","duration","icon","toHandle","url","toPay","rePayForPrePayId","then","setTimeout","provider","timeStamp","nonceStr","package","signType","paySign","success","fail","finally","catch","err","getDetail","getTaskInfo","getMyOrderInfo","clearInterval","res2","cancelDel","getMomentsList","page","pagesize","status","refund_id","getMyOrderList","el","img_url","line_4_itemsSelected","toDetail","delOrder"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AACsK;AACtK,gBAAgB,6KAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,aAAa,0VAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACvEA;AAAA;AAAA;AAAA;AAAinB,CAAgB,+mBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eC6GroB;EACAC;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACA;MACAC;QACAC;QACAC;QACAC;MACA;MACA;MACAC;MACAC;QAAA;QAAA;QAAA;MAAA;MACAC;QACA;QACA;QACA;QACA;QACA;QACA;MACA;MACAC;QACA;QACA;QACA;MACA;MACAC,eACA;QAAAC;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,EACA;MACAC;MACA;MACA;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IAAA;IACA;MACA;IACA;IACA;IACAC,MACAC,sBACAC;MACA;IACA,GACAC;IACA;IACA;IAEAC;MACAC;MACA;IACA;EACA;EACAC;IACA;IACA;IACA;EAAA,CACA;EACA;EACAC;IACA;IACA;IACA;IACA;EACA;EACA;EACAC;IAAA;IACA;IACA;IACA;IACA;IACA;IACA;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA,OACA;YAAA;cACA;cACAJ;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CACA;EACA;EACAK;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAC;gBAAA;gBAAA,MAEA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACA;kBAAAC;gBAAA;cAAA;gBAAAD;gBAAA;gBAAA;cAAA;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACA;kBAAAC;gBAAA;cAAA;gBAAAD;gBAAA;gBAAA;cAAA;gBAAA;gBAAA,OAEA;kBAAAC;gBAAA;cAAA;gBAAAD;cAAA;gBAEAN;gBACA;kBACA;oBACA;kBACA;oBACA;kBACA;oBACA;sBACA;oBACA;sBACA;oBACA;kBACA;kBACAD;oBACAS,OACA,0BACA,WACA,2BACA,WACA;oBACAC;oBACAC;kBACA;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAAA,MAEA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACA;cAAA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAGA;IACA;IACAC;MACA;MACA;QACA;MACA;QACA;QACAZ;UACAa;QACA;MACA;QACA;QACAb;UACAa;QACA;MACA;QACA;QACA;MACA;IACA;IACAC;MAAA;MACA;QACA;QACA,eACAC;UAAAP;QAAA,GACAQ;UACAC;YACA;UACA;UACA;UACAjB;YACAkB;YACAC;YACAC;YACAC;YACAC;YACAC;YACAC;cACA;YACA;YACAC;cACAzB;gBACAS;gBACAE;cACA;YACA;UACA;QACA,GACAe;UACA;QACA,GACAC;UAAA;YAAA;cAAA;gBAAA;kBAAA;oBAAA,MACAC;sBAAA;sBAAA;oBAAA;oBAAA;oBAAA,OACA;kBAAA;oBACA;oBACA;kBAAA;kBAAA;oBAAA;gBAAA;cAAA;YAAA;UAAA,CAEA;UAAA;YAAA;UAAA;QAAA;MACA;IACA;IACAC;MAAA;MACA,cACAC;QAAAtB;MAAA,GACAQ;QACA;UACA,iBACAe;YAAAvB;UAAA,GACAQ;YACAgB;YACA/B;YACA;cACAD;gBACAS;gBACAE;cACA;cACA,4BACAsB,qCACA;YACA;UACA,GACAN;YAAA;cAAA;gBAAA;kBAAA;oBAAA;sBAAA,MACAC;wBAAA;wBAAA;sBAAA;sBACAI;sBAAA;sBAAA,OACA;oBAAA;sBACA;oBAAA;oBAAA;sBAAA;kBAAA;gBAAA;cAAA;YAAA,CAEA;YAAA;cAAA;YAAA;UAAA;QACA;MACA,GACAL;QAAA;UAAA;YAAA;cAAA;gBAAA;kBAAA,MACAC;oBAAA;oBAAA;kBAAA;kBAAA;kBAAA,OACA;gBAAA;kBACA;gBAAA;gBAAA;kBAAA;cAAA;YAAA;UAAA;QAAA,CAEA;QAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAM;MACA;IACA;IACAC;MAAA;MACA;MACA;QACAC;QACAC;QACAC;QACAC;MACA;MACA,eACAC,sBACAxB;QACAf;QACA;QACA;UACA;QACA;QACA;UACA;YACAM,2BACA;cAAA,OACA,iBACAkC;YAAA,EACA;UACA;UACA;YACA,sDACAlC;cACAmC,+BACAnC,oCACA;YAAA,GACA;UACA;UACA;UACA;UACA;QACA;UACA;QACA;MACA,GACAoB;QAAA;UAAA;YAAA;cAAA;gBAAA;kBAAA,MACAC;oBAAA;oBAAA;kBAAA;kBAAA;kBAAA,OACA;gBAAA;kBACA;gBAAA;gBAAA;kBAAA;cAAA;YAAA;UAAA;QAAA,CAEA;QAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAe;MACA;MACA;MACA;MACA;IACA;IACA;IACAC;MACA5C;QACAa;MACA;IACA;IACA;IACAgC;MACA;MACA;MACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC5ZA;AAAA;AAAA;AAAA;AAAgsC,CAAgB,snCAAG,EAAC,C;;;;;;;;;;;ACAptC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"page_product/pages/order/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './page_product/pages/order/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=dbef2f78&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=dbef2f78&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"dbef2f78\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"page_product/pages/order/index.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=dbef2f78&scoped=true&\"","var components\ntry {\n  components = {\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-icon/u-icon\" */ \"@/uni_modules/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uniLoadMore: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-load-more/components/uni-load-more/uni-load-more\" */ \"@/uni_modules/uni-load-more/components/uni-load-more/uni-load-more.vue\"\n      )\n    },\n    uModal: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-modal/u-modal\" */ \"@/uni_modules/uview-ui/components/u-modal/u-modal.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.orderList, function (item, index) {\n    var $orig = _vm.__get_orig(item)\n    var g0 =\n      _vm.current == 5 ||\n      (_vm.current == 0 &&\n        item.refund_id > 0 &&\n        [1, 2].includes(item.refund_check_status))\n    var g1 = !(item.status == 1)\n      ? [2, 3, 5].includes(item.status) &&\n        (!item.refund_id ||\n          (item.refund_id > 0 && item.refund_check_status == 3))\n      : null\n    var g2 = [1].includes(item.status)\n    return {\n      $orig: $orig,\n      g0: g0,\n      g1: g1,\n      g2: g2,\n    }\n  })\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"order\">\n    <view class=\"the-line-4\">\n      <view\n        @click=\"line_4_itemsSelected(index)\"\n        class=\"the-line-4-item\"\n        v-for=\"(item, index) in line_4_items\"\n      >\n        <view class=\"the-line-4-item-name\">{{ item.label }}</view>\n        <view v-if=\"index == current\" class=\"the-line-4-item-line\"></view>\n      </view>\n    </view>\n    <view :style=\"'margin-top:' + contentHeight + 'px;'\" class=\"list-container\">\n      <view\n        @click=\"toDetail(item)\"\n        v-for=\"(item, index) in orderList\"\n        :key=\"index\"\n        class=\"list-item\"\n      >\n        <view class=\"list-item-top flex-align\">\n          <view class=\"top-left flex-align\">\n            <view class=\"round flex-align\">\n              <view class=\"small-round\"></view>\n              <view class=\"big-round\"></view>\n              <view class=\"small-round\"></view>\n            </view>\n            <text\n              v-if=\"\n                current == 5 ||\n                (current == 0 &&\n                  item.refund_id > 0 &&\n                  [1, 2].includes(item.refund_check_status))\n              \"\n              >{{ refundText[item.refund_check_status] }}</text\n            >\n            <text v-else>{{ statusText[item.status] }}</text>\n          </view>\n          <view\n            @click.native.stop=\"delOrder(item, index, 'del')\"\n            class=\"top-right flex-align\"\n            v-if=\"item.status == 4\"\n          >\n            <u-icon name=\"trash\" color=\"#8A8A8A\" size=\"14\"></u-icon>\n          </view>\n        </view>\n        <view class=\"list-item-center flex-align\">\n          <image mode=\"aspectFill\" :src=\"item.img_url\" />\n          <view class=\"product-info\">\n            <view class=\"product-title\">{{ item.title }}</view>\n            <view class=\"product-price\"\n              ><text\n                >￥<text class=\"price-text\">{{ item.sale_price }}</text></text\n              >\n            </view>\n          </view>\n        </view>\n        <view class=\"list-item-bottom flex-align\">\n          <view v-if=\"item.status == 1\" class=\"flex-align\">\n            <view\n              class=\"other-btn\"\n              @click.native.stop=\"delOrder(item, index, 'cancel')\"\n              >取消订单</view\n            >\n            <view class=\"detail-btn\" @click.native.stop=\"toHandle(item, index)\"\n              >去支付</view\n            >\n          </view>\n          <view\n            v-else-if=\"\n              [2, 3, 5].includes(item.status) &&\n              (!item.refund_id ||\n                (item.refund_id > 0 && item.refund_check_status == 3))\n            \"\n            @click.native.stop=\"toHandle(item, index)\"\n            class=\"other-btn\"\n            >{{ btnText[item.status] }}</view\n          >\n          <view\n            @click.native.stop=\"toDetail(item)\"\n            v-if=\"![1].includes(item.status)\"\n            class=\"detail-btn\"\n            >查看订单</view\n          >\n        </view>\n      </view>\n    </view>\n    <!-- 底部垫层 -->\n    <view class=\"space-line-bottom\">\n      <uni-load-more :status=\"isLoading\"></uni-load-more>\n    </view>\n    <view class=\"safe-bottom\"></view>\n    <u-modal\n      :show=\"show\"\n      :show-cancel-button=\"true\"\n      @confirm=\"confirmDel\"\n      @cancel=\"cancelDel\"\n      confirm-color=\"#FF812F\"\n      :content=\"\n        content == 'del'\n          ? '确认删除订单?'\n          : content == 'send'\n          ? '确认收货?'\n          : '确认取消订单?'\n      \"\n    ></u-modal>\n  </view>\n</template>\n\n<script>\nexport default {\n  components: {},\n  data() {\n    return {\n      clickAble: true,\n      content: \"\",\n      delId: 0,\n      handleIndex: \"\",\n      show: false,\n      // 用于 uni-load-more\n      contentText: {\n        contentdown: \"查看更多\",\n        contentrefresh: \"加载中...\",\n        contentnomore: \"到底了，可点击此处手动加载~\",\n      },\n      // 最后的加载组件的加载动画效果，\n      isLoading: \"loading\",\n      btnText: { 2: \"申请退款\", 5: \"确认收货\", 3: \"立即评价\" },\n      statusText: {\n        1: \"待支付\",\n        2: \"待发货\",\n        5: \"待收货\",\n        3: \"待评价\",\n        6: \"已完成\",\n        4: \"已取消\",\n      },\n      refundText: {\n        1: \"退款中\",\n        2: \"退款成功\",\n        3: \"退款失败\",\n      },\n      line_4_items: [\n        { label: \"全部\", value: 0 },\n        { label: \"待支付\", value: 1 },\n        { label: \"待发货\", value: 2 },\n        { label: \"待收货\", value: 5 },\n        { label: \"待评价\", value: 3 },\n        { label: \"退款/售后\", value: 0 },\n      ],\n      current: 0,\n      // 用于分页加载传参\n      // 当前获取的校园墙页码，每次需要+1\n      theGetMomentsListPage: 1,\n      theGetMomentsListPagesize: 5,\n      orderList: [],\n      contentHeight: 0,\n    };\n  },\n  onLoad(options) {\n    if (options.current) {\n      this.current = options.current;\n    }\n    let query = uni.createSelectorQuery().in(this);\n    query\n      .select(\".the-line-4\")\n      .boundingClientRect((data) => {\n        this.contentHeight = data.height;\n      })\n      .exec();\n    this.theGetMomentsListPage = 1;\n    this.getMomentsList();\n\n    uni.$on(\"changeTab\", (data) => {\n      console.log(data);\n      this.line_4_itemsSelected(data);\n    });\n  },\n  onShow() {\n    // --------------------------------------------------------------调用初始数据--------------------------------------------------------------\n    // --------------------------------------------------------------调用初始数据--------------------------------------------------------------\n    // --------------------------------------------------------------调用初始数据--------------------------------------------------------------\n  },\n  // 页面触底的监听事件，配合pages.json中的\"onReachBottomDistance\": 0，0的位置写距离底部的距离\n  onReachBottom() {\n    // 触底后动画效果开启\n    this.isLoading = \"loading\";\n    // 调用接口\n    this.getMomentsList();\n  },\n  // 监听下拉动作\n  onPullDownRefresh() {\n    // 重置获取的页码\n    this.theGetMomentsListPage = 1;\n    // 重置数组\n    this.orderList = [];\n    // 异步转同步调用\n    (async () => {\n      await this.getMomentsList();\n      // 等待接口返回后，取消下拉刷新动画\n      uni.stopPullDownRefresh();\n    })();\n  },\n  methods: {\n    // 确认删除\n    async confirmDel() {\n      let res = \"\";\n      try {\n        if (this.content == \"del\") {\n          res = await this.API.order.delOrder({ id: this.delId });\n        } else if (this.content == \"send\") {\n          res = await this.API.order.checkOrder({ id: this.delId });\n        } else {\n          res = await this.API.order.cancelOrder({ id: this.delId });\n        }\n        console.log(res);\n        if (res.code == 0) {\n          if (this.content == \"del\") {\n            this.orderList.splice(this.handleIndex, 1);\n          } else if (this.content == \"send\") {\n            this.line_4_itemsSelected(4);\n          } else {\n            if (this.current == 0) {\n              this.$set(this.orderList[this.handleIndex], \"status\", 4);\n            } else {\n              this.orderList.splice(this.handleIndex, 1);\n            }\n          }\n          uni.showToast({\n            title:\n              this.content == \"del\"\n                ? \"订单删除成功\"\n                : this.content == \"send\"\n                ? \"确认收货成功\"\n                : \"订单取消成功\",\n            duration: 2500,\n            icon: \"none\",\n          });\n          this.cancelDel();\n        }\n      } catch (error) {\n        if (error.code == 410) {\n          await this.$store.dispatch(\"toLogon\", {});\n          this.confirmDel();\n        }\n      }\n    },\n    // 订单操作\n    toHandle(item, index) {\n      // 支付\n      if (item.status == 1) {\n        this.toPay(item);\n      } else if (item.status == 2) {\n        //退款\n        uni.navigateTo({\n          url: `/page_product/pages/order/refund?id=${item.id}&from=all`,\n        });\n      } else if (item.status == 3) {\n        //评价\n        uni.navigateTo({\n          url: `/page_product/pages/order/evaluate?id=${item.id}&from=all`,\n        });\n      } else if (item.status == 5) {\n        //确认收货\n        this.delOrder(item, index, \"send\");\n      }\n    },\n    toPay(item) {\n      if (this.clickAble) {\n        this.clickAble = false;\n        this.API.order\n          .rePayForPrePayId({ id: item.id })\n          .then((result) => {\n            setTimeout(() => {\n              this.clickAble = true;\n            }, 1000);\n            let newData = result.data;\n            uni.requestPayment({\n              provider: \"wxpay\",\n              timeStamp: newData.timeStamp,\n              nonceStr: newData.nonceStr,\n              package: newData.package,\n              signType: newData.signType,\n              paySign: newData.paySign,\n              success: (res1) => {\n                this.getDetail(item);\n              },\n              fail: (err) => {\n                uni.showToast({\n                  title: \"支付取消\",\n                  icon: \"none\",\n                });\n              },\n            });\n          })\n          .finally(() => {\n            this.clickAble = true;\n          })\n          .catch(async (err) => {\n            if (err.code == 410) {\n              await this.$store.dispatch(\"toLogon\", {});\n              this.clickAble = true;\n              this.toPay(item);\n            }\n          });\n      }\n    },\n    getDetail(item) {\n      this.API.home\n        .getTaskInfo({ id: item.product_id })\n        .then((res2) => {\n          let dsq = setInterval(() => {\n            this.API.order\n              .getMyOrderInfo({ id: item.id })\n              .then((res) => {\n                clearInterval(dsq);\n                console.log(res);\n                if ([2, 3].includes(res.data.status)) {\n                  uni.showToast({\n                    title: \"支付成功\",\n                    icon: \"none\",\n                  });\n                  this.line_4_itemsSelected(\n                    res2.data.is_auto_check == 1 ? 4 : 2\n                  );\n                }\n              })\n              .catch(async (err) => {\n                if (err.code == 410) {\n                  clearInterval(dsq);\n                  await this.$store.dispatch(\"toLogon\", {});\n                  this.getDetail(item);\n                }\n              });\n          }, 1000);\n        })\n        .catch(async (err) => {\n          if (err.code == 410) {\n            await this.$store.dispatch(\"toLogon\", {});\n            this.getDetail(item);\n          }\n        });\n    },\n    // 取消删除\n    cancelDel() {\n      this.show = false;\n    },\n    getMomentsList() {\n      this.isLoading = \"loading\";\n      let param = {\n        page: this.theGetMomentsListPage,\n        pagesize: this.theGetMomentsListPagesize,\n        status: this.line_4_items[this.current].value,\n        refund_id: this.current == 5 ? 1 : 0,\n      };\n      this.API.order\n        .getMyOrderList(param)\n        .then((res) => {\n          console.log(res);\n          // 如果是请求第一页，证明是首次请求，就重置一下\n          if (this.theGetMomentsListPage == 1) {\n            this.orderList = [];\n          }\n          if (res.data.length != 0) {\n            if (![0, 5].includes(this.current)) {\n              res.data = res.data.filter(\n                (el) =>\n                  !el.refund_id ||\n                  (el.refund_id > 0 && el.refund_check_status == 3)\n              );\n            }\n            for (let i = 0; i < res.data.length; i++) {\n              this.orderList.push({\n                ...res.data[i],\n                img_url: res.data[i].img_url\n                  ? res.data[i].img_url.split(\",\")[0]\n                  : \"\",\n              });\n            }\n            this.isLoading = \"no-more\"; // 取消加载动画\n            // 页面+1\n            this.theGetMomentsListPage += 1;\n          } else {\n            this.isLoading = \"no-more\"; // 取消加载动画\n          }\n        })\n        .catch(async (err) => {\n          if (err.code == 410) {\n            await this.$store.dispatch(\"toLogon\", {});\n            this.getMomentsList();\n          }\n        });\n    },\n    // 切换状态\n    line_4_itemsSelected(index) {\n      this.current = index;\n      this.orderList = [];\n      this.theGetMomentsListPage = 1;\n      this.getMomentsList();\n    },\n    // 跳转详情\n    toDetail(row) {\n      uni.navigateTo({\n        url: \"/page_product/pages/order/detail?id=\" + row.id,\n      });\n    },\n    // 删除已取消状态订单\n    delOrder(item, index, type) {\n      this.content = type;\n      this.delId = item.id;\n      this.handleIndex = index;\n      this.show = true;\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.order {\n  min-height: 100vh;\n  box-sizing: border-box;\n  background: #fafafa;\n  overflow: hidden;\n  .the-line-4 {\n    display: flex;\n    flex-direction: row;\n    width: 100vw;\n    background-color: #ffffff;\n    position: fixed;\n\n    .the-line-4-item {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      width: 50%;\n    }\n\n    .the-line-4-item-selected {\n      color: #000000 !important;\n    }\n\n    .the-line-4-item-name {\n      margin-top: 10px;\n      color: #bbbbbb;\n      font-family: PingFang SC;\n      font-weight: 400;\n      font-size: 26rpx;\n      color: #000000;\n      height: 25px;\n      line-height: 25px;\n    }\n\n    .the-line-4-item-line {\n      width: 45rpx;\n      height: 8rpx;\n      background: #ff812f;\n      margin-top: 7px;\n    }\n  }\n  .list-container {\n    overflow: hidden;\n    .list-item {\n      margin-top: 20rpx;\n      background: #ffffff;\n      border-radius: 20rpx;\n      padding: 21rpx 30rpx 36rpx;\n      .list-item-top {\n        justify-content: space-between;\n        .top-left {\n          text {\n            font-family: PingFang SC;\n            font-weight: 300;\n            font-size: 24rpx;\n            color: #393a3e;\n            margin-left: 21rpx;\n          }\n          .round {\n            .small-round {\n              width: 6rpx;\n              height: 6rpx;\n              background: #808080;\n              border-radius: 3rpx;\n              opacity: 0.51;\n            }\n            .big-round {\n              margin: 0 8rpx;\n              width: 10rpx;\n              height: 10rpx;\n              background: #808080;\n              border-radius: 5rpx;\n            }\n          }\n        }\n        .top-right {\n          justify-content: center;\n          width: 40rpx;\n          height: 40rpx;\n          background: #eaeaea;\n          border-radius: 20rpx;\n        }\n      }\n      .list-item-center {\n        margin-top: 20rpx;\n        image {\n          width: 140rpx;\n          height: 140rpx;\n          background: #ffffff;\n          border-radius: 6rpx;\n          border: 1px solid #eeeeee;\n          margin-right: 29rpx;\n        }\n        .product-info {\n          box-sizing: border-box;\n          height: 140rpx;\n          width: calc(100% - 169rpx);\n          display: flex;\n          flex-direction: column;\n          justify-content: center;\n          .product-title {\n            font-family: PingFang SC;\n            font-weight: 500;\n            font-size: 24rpx;\n            color: #393a3e;\n            margin-bottom: 36rpx;\n            width: 100%;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            display: -webkit-box;\n            -webkit-box-orient: vertical;\n            -webkit-line-clamp: 2;\n          }\n          .product-price {\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n            font-family: PingFang SC;\n            font-weight: 300;\n            font-size: 22rpx;\n            color: #f23333;\n            display: flex;\n            align-items: flex-end;\n            line-height: 23rpx;\n            .price-text {\n              font-size: 34rpx;\n            }\n          }\n        }\n      }\n      .list-item-bottom {\n        justify-content: flex-end;\n        .detail-btn {\n          width: 150rpx;\n          height: 54rpx;\n          background: #ff812f;\n          border-radius: 100rpx;\n          border: 1px solid #ff812f;\n          margin-left: 30rpx;\n          font-family: PingFang SC;\n          font-weight: 300;\n          font-size: 24rpx;\n          color: #ffffff;\n          line-height: 54rpx;\n          text-align: center;\n        }\n        .other-btn {\n          line-height: 54rpx;\n          text-align: center;\n          width: 150rpx;\n          height: 54rpx;\n          border-radius: 100rpx;\n          border: 1px solid #a2a2a2;\n          font-family: PingFang SC;\n          font-weight: 300;\n          font-size: 24rpx;\n          color: #818181;\n        }\n      }\n    }\n  }\n  .space-line-bottom {\n    margin-top: 40rpx;\n  }\n  .flex-align {\n    display: flex;\n    align-items: center;\n  }\n  .safe-bottom {\n    padding-bottom: env(safe-area-inset-bottom);\n  }\n}\n</style>","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=dbef2f78&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=dbef2f78&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1719476889926\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}