{"version":3,"sources":["uni-app:///main.js","webpack:///D:/ouying/o2_store/page_product/pages/search/searchResult.vue?520b","webpack:///D:/ouying/o2_store/page_product/pages/search/searchResult.vue?afc1","webpack:///D:/ouying/o2_store/page_product/pages/search/searchResult.vue?4db9","webpack:///D:/ouying/o2_store/page_product/pages/search/searchResult.vue?b488","uni-app:///page_product/pages/search/searchResult.vue","webpack:///D:/ouying/o2_store/page_product/pages/search/searchResult.vue?ca10","webpack:///D:/ouying/o2_store/page_product/pages/search/searchResult.vue?9667"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","data","orderType","order_field","isLoading","pxList","label","type","theGetMomentsListPage","theGetMomentsListPagesize","searchText","searchRecord","contentText","contentdown","contentrefresh","contentnomore","list","contentHeight","onLoad","query","select","boundingClientRect","exec","onReachBottom","methods","changeType","goDetail","uni","url","changeText","cancel","delta","getSearchRecord","JSON","getList","page","pagesize","title","order_type","is_product","area_code","console","res","img_url","searchReasult","value"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,qBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqI;AACrI;AACgE;AACL;AACsC;;;AAGjG;AACsK;AACtK,gBAAgB,6KAAU;AAC1B,EAAE,kFAAM;AACR,EAAE,mGAAM;AACR,EAAE,4GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,uGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,aAAa,0VAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACtCA;AAAA;AAAA;AAAA;AAAwnB,CAAgB,snBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eC+D5oB;EACAC;EACAC;IACA;MACAC;MACAC;MACAC;MACAC,SACA;QACAC;QACAC;MACA,GACA;QACAD;QACAC;MACA,GACA;QACAD;QACAC;MACA,EACA;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;IACA;EACA;EACAC;IAAA;IACA;IACAC,MACAC,oBACAC;MACA;IACA,GACAC;IACA;MACA;MACA;IACA;EACA;EACAC;IACA;IACA;IACA;EACA;EACAC;IACA;IACAC;MACA;QACA;QACA;UACA;QACA;UACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;IACA;IACA;IACAC;MACAC;QACAC;MACA;IACA;IACAC;MACA;QACAF;MACA;IACA;IACAG;MACAH;QACAI;MACA;IACA;IACA;IACAC;MACA,yDACAC,iDACA;MACA;QACA;UACA;YACA;UACA;QACA;MACA;IACA;IACAC;MAAA;MACA;QACAC;QACAC;QACAC;QACAC;QACAnC;QACAoC;QACAC;MACA;MACA;QACAC;QACA;QACA;UACA;QACA;QACA;UACA;YACA,iDACAC;cACAC,+BACAD,oCACA;YAAA,GACA;UACA;UAEA;UACA;UACA;QACA;UACA;QACA;MACA;IACA;IACAE;MACA;QACA;QACA;UACA;YACA;UACA;QACA;QACA;UACAC;QACA;QACAlB;QACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACpNA;AAAA;AAAA;AAAA;AAAusC,CAAgB,6nCAAG,EAAC,C;;;;;;;;;;;ACA3tC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"page_product/pages/search/searchResult.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './page_product/pages/search/searchResult.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./searchResult.vue?vue&type=template&id=3b74e442&scoped=true&\"\nvar renderjs\nimport script from \"./searchResult.vue?vue&type=script&lang=js&\"\nexport * from \"./searchResult.vue?vue&type=script&lang=js&\"\nimport style0 from \"./searchResult.vue?vue&type=style&index=0&id=3b74e442&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3b74e442\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"page_product/pages/search/searchResult.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./searchResult.vue?vue&type=template&id=3b74e442&scoped=true&\"","var components\ntry {\n  components = {\n    uSearch: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-search/u-search\" */ \"@/uni_modules/uview-ui/components/u-search/u-search.vue\"\n      )\n    },\n    uniLoadMore: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-load-more/components/uni-load-more/uni-load-more\" */ \"@/uni_modules/uni-load-more/components/uni-load-more/uni-load-more.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./searchResult.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./searchResult.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"search-result\">\n    <view class=\"top-fixd\">\n      <view class=\"top-search\">\n        <u-search\n          placeholder=\"请输入搜索关键词\"\n          v-model=\"searchText\"\n          :showAction=\"true\"\n          actionText=\"取消\"\n          :clearabled=\"true\"\n          @change=\"changeText\"\n          @search=\"searchReasult\"\n          @custom=\"cancel\"\n        ></u-search>\n      </view>\n      <view class=\"order-container\">\n        <view\n          class=\"order-item\"\n          @click=\"changeType(item, index)\"\n          v-for=\"(item, index) in pxList\"\n          :key=\"index\"\n        >\n          <image v-if=\"item.label == '综合'\" src=\"@/static/icon-zh.png\" />\n          <image v-else-if=\"item.label == '销量'\" src=\"@/static/icon-xl.png\" />\n          <image v-else src=\"@/static/icon-jg.png\" />\n          <text>{{ item.label }}</text>\n        </view>\n      </view>\n    </view>\n    <view class=\"list-container\" :style=\"'margin-top:' + contentHeight + 'px;'\">\n      <view\n        @click=\"goDetail(item)\"\n        class=\"list-item\"\n        v-for=\"(item, index) in list\"\n        :key=\"index\"\n      >\n        <view class=\"image-box\">\n          <image mode=\"aspectFill\" :src=\"item.img_url\" />\n        </view>\n        <view class=\"list-item-info\">\n          <view class=\"list-item-title\">{{ item.title }}</view>\n          <view class=\"list-item-price flex-algin\">\n            <view class=\"list-item-price-left\"\n              >¥<text style=\"font-size: 34rpx\">{{\n                item.sale_price\n              }}</text></view\n            >\n            <view class=\"list-item-price-right\">已售：{{ item.sale_num }}</view>\n          </view>\n        </view>\n      </view>\n    </view>\n    <!-- 底部垫层 -->\n    <view @click=\"getList()\" class=\"space-line-bottom\">\n      <uni-load-more\n        :status=\"isLoading\"\n        :content-text=\"contentText\"\n      ></uni-load-more>\n    </view>\n  </view>\n</template>\n\n<script>\nexport default {\n  components: {},\n  data() {\n    return {\n      orderType: \"desc\",\n      order_field: \"sort\",\n      isLoading: \"loading\",\n      pxList: [\n        {\n          label: \"综合\",\n          type: \"sort\",\n        },\n        {\n          label: \"销量\",\n          type: \"sale_num\",\n        },\n        {\n          label: \"价格\",\n          type: \"sale_price\",\n        },\n      ],\n      // 当前获取的校园墙页码，每次需要+1\n      theGetMomentsListPage: 1,\n      theGetMomentsListPagesize: 4,\n      searchText: \"\",\n      searchRecord: [],\n      contentText: {\n        contentdown: \"查看更多\",\n        contentrefresh: \"加载中...\",\n        contentnomore: \"到底了，可点击此处手动加载~\",\n      },\n      list: [],\n      contentHeight: 0,\n    };\n  },\n  onLoad(options) {\n    let query = uni.createSelectorQuery().in(this);\n    query\n      .select(\".top-fixd\")\n      .boundingClientRect((data) => {\n        this.contentHeight = data.height;\n      })\n      .exec();\n    if (options.text) {\n      this.searchText = options.text;\n      this.searchReasult();\n    }\n  },\n  onReachBottom() {\n    // 触底后动画效果开启\n    this.isLoading = \"loading\";\n    this.getList();\n  },\n  methods: {\n    // 切换类型\n    changeType(item, index) {\n      if (this.order_field != item.type || index == 2) {\n        this.order_field = item.type;\n        if (index == 2) {\n          this.orderType = this.orderType == \"desc\" ? \"asc\" : \"desc\";\n        } else {\n          this.orderType = \"desc\";\n        }\n        this.theGetMomentsListPage = 1;\n        this.list = [];\n        // 触底后动画效果开启\n        this.isLoading = \"loading\";\n        this.getList();\n      }\n    },\n    // 跳转详情\n    goDetail(item) {\n      uni.navigateTo({\n        url: \"/page_product/pages/product/detail?id=\" + item.id,\n      });\n    },\n    changeText(val) {\n      if (!val) {\n        uni.navigateBack();\n      }\n    },\n    cancel() {\n      uni.navigateBack({\n        delta: 2,\n      });\n    },\n    // 获取历史纪录\n    getSearchRecord() {\n      this.searchRecord = uni.getStorageSync(\"searchRecord\")\n        ? JSON.parse(uni.getStorageSync(\"searchRecord\"))\n        : [] || [];\n      if (this.searchRecord.length > 0) {\n        for (let i in this.searchRecord) {\n          if (i > 9) {\n            this.searchRecord.splice(i, 1);\n          }\n        }\n      }\n    },\n    getList() {\n      let params = {\n        page: this.theGetMomentsListPage,\n        pagesize: this.theGetMomentsListPagesize,\n        title: this.searchText,\n        order_type: this.orderType,\n        order_field: this.order_field,\n        is_product: 1,\n        area_code: this.$store.state.store_addressNow.code,\n      };\n      this.API.home.getTaskList(params).then((res) => {\n        console.log(res);\n        // 如果是请求第一页，证明是首次请求，就重置一下\n        if (this.theGetMomentsListPage == 1) {\n          this.list = [];\n        }\n        if (res.data.length != 0) {\n          for (let i = 0; i < res.data.length; i++) {\n            this.list.push({\n              ...res.data[i],\n              img_url: res.data[i].img_url\n                ? res.data[i].img_url.split(\",\")[0]\n                : \"\",\n            });\n          }\n\n          this.isLoading = \"no-more\"; // 取消加载动画\n          // 页面+1\n          this.theGetMomentsListPage += 1;\n        } else {\n          this.isLoading = \"no-more\"; // 取消加载动画\n        }\n      });\n    },\n    searchReasult() {\n      if (this.searchText) {\n        this.getSearchRecord();\n        for (var i in this.searchRecord) {\n          if (this.searchText == this.searchRecord[i].value) {\n            this.searchRecord.splice(i, 1);\n          }\n        }\n        this.searchRecord.unshift({\n          value: this.searchText,\n        });\n        uni.setStorageSync(\"searchRecord\", JSON.stringify(this.searchRecord));\n        this.getList();\n      }\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.search-result {\n  box-sizing: border-box;\n  min-height: 100vh;\n  background: #fafafa;\n  .top-fixd {\n    z-index: 5;\n    background: #ffffff;\n    box-sizing: border-box;\n    position: fixed;\n    width: 100%;\n    top: 0;\n    .top-search {\n      padding: 30rpx 30rpx 8rpx;\n    }\n    .order-container {\n      display: flex;\n      align-items: center;\n      padding: 24rpx;\n      .order-item {\n        flex: 1;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        position: relative;\n        image {\n          width: 38rpx;\n          height: 38rpx;\n          margin-right: 3rpx;\n        }\n        &:after {\n          position: absolute;\n          right: 0;\n          content: \"\";\n          height: 24rpx;\n          border-right: 1rpx solid #d7d7d7;\n        }\n        text {\n          line-height: 36rpx;\n        }\n      }\n      .order-item:last-child {\n        &:after {\n          border: none;\n        }\n      }\n    }\n  }\n  .list-container {\n    padding: 24rpx 30rpx 0;\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n    flex-wrap: wrap;\n    box-sizing: border-box;\n    .list-item {\n      margin-bottom: 20rpx;\n      width: 335rpx;\n      border-radius: 10rpx 10rpx 0rpx 0rpx;\n      .image-box {\n        background: #ffffff;\n        border-radius: 10rpx 10rpx 0rpx 0rpx;\n        width: 335rpx;\n        height: 335rpx;\n        z-index: 1;\n        position: relative;\n        image {\n          border-radius: 10rpx 10rpx 0rpx 0rpx;\n          width: 335rpx;\n          height: 335rpx;\n        }\n      }\n      .list-item-info {\n        margin-top: -15rpx;\n        padding: 30rpx 21rpx 32rpx;\n        background: #ffffff;\n        box-shadow: 0rpx 0rpx 7rpx 1rpx rgba(0, 0, 0, 0.04);\n        border-radius: 0 0 10rpx 10rpx;\n        border: 1px solid #f4f4f4;\n        border-top: none;\n        .list-item-title {\n          width: 100%;\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          font-family: PingFang SC;\n          font-weight: 500;\n          font-size: 24rpx;\n          color: #393a3e;\n          margin-bottom: 24rpx;\n        }\n        .list-item-price {\n          display: flex;\n          justify-content: space-between;\n          align-items: flex-end;\n          .list-item-price-left {\n            font-family: PingFang SC;\n            font-weight: 300;\n            font-size: 22rpx;\n            color: #f23333;\n            line-height: 24rpx;\n          }\n          .list-item-price-right {\n            font-family: PingFang SC;\n            font-weight: 400;\n            font-size: 22rpx;\n            color: #999999;\n          }\n        }\n      }\n    }\n  }\n}\n</style>","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./searchResult.vue?vue&type=style&index=0&id=3b74e442&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./searchResult.vue?vue&type=style&index=0&id=3b74e442&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1716465323238\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}